{"version":3,"file":"src_app_pages_support_support_module_ts.js","mappings":"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","sources":["./src/app/pages/support/support-routing.module.ts","./src/app/pages/support/support.module.ts","./src/app/pages/support/support.page.ts","./src/app/pages/support/support.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SupportPage } from './support.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SupportPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SupportPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { SupportPageRoutingModule } from './support-routing.module';\r\nimport { SupportPage } from './support.page';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SupportPageRoutingModule,\r\n    TranslateModule.forChild()\r\n  ],\r\n  declarations: [SupportPage]\r\n})\r\nexport class SupportPageModule {}\r\n","import { Component, OnInit, ViewChild, OnDestroy } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { StatusBar } from '@capacitor/status-bar';\r\nimport { IonContent } from '@ionic/angular';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { AvatarService } from 'src/app/services/avatar.service';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { Auth } from '@angular/fire/auth';\r\nimport { authState } from 'rxfire/auth';\r\n\r\n@Component({\r\n  selector: 'app-support',\r\n  templateUrl: './support.page.html',\r\n  styleUrls: ['./support.page.scss'],\r\n})\r\nexport class SupportPage implements OnInit, OnDestroy {\r\n\r\n  @ViewChild(IonContent) content: IonContent;\r\n \r\n  newMsg = '';\r\n  messages: Observable<import(\"@angular/fire/firestore\").DocumentData[]>;\r\n  hasNoData: boolean = false;\r\n  skeletOns: Array<{}> = [{}, {}, {}, {}];\r\n  hideSkeleton: boolean = false;\r\n  loading = true;\r\n  private messageSubscription: Subscription;\r\n\r\n  constructor(\r\n    private chatService: AvatarService,\r\n    private router: Router,\r\n    private translate: TranslateService,\r\n    private auth: Auth\r\n  ) { }\r\n \r\n  ngOnInit() {\r\n    // Check authentication status\r\n    authState(this.auth).subscribe((user) => {\r\n      if (user) {\r\n        this.initializeChat();\r\n      } else {\r\n        this.router.navigate(['/login']);\r\n      }\r\n    });\r\n  }\r\n\r\n  private initializeChat() {\r\n    this.hideSkeleton = true;\r\n    this.loading = true;\r\n    this.messages = this.chatService.getMessage();\r\n    \r\n    // Store subscription for cleanup\r\n    this.messageSubscription = this.messages.subscribe({\r\n      next: (messages) => {\r\n        this.loading = false;\r\n        this.hideSkeleton = false;\r\n        this.hasNoData = messages.length === 0; \r\n        if(messages.length > 0){\r\n          requestAnimationFrame(() => this.content.scrollToBottom(300));\r\n        \r\n        }\r\n\r\n      },\r\n      error: (error) => {\r\n        console.error('Error loading messages:', error);\r\n        this.loading = false;\r\n        this.hideSkeleton = false;\r\n        this.hasNoData = true;\r\n        \r\n        // Handle permission error specifically\r\n        if (error.code === 'permission-denied') {\r\n          // You might want to show a user-friendly message or redirect\r\n          this.router.navigate(['/error'], { \r\n            queryParams: { \r\n              message: 'You do not have permission to access this chat.' \r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  async Show(){\r\n    await StatusBar.setOverlaysWebView({ overlay: false });\r\n   \r\n  }\r\n\r\n  async Hide(){\r\n    await StatusBar.setOverlaysWebView({ overlay: true });\r\n   \r\n  }\r\n\r\n  async sendMessage() {\r\n    if (this.newMsg.trim()) {\r\n      try {\r\n        await this.chatService.addChatMessage(this.newMsg);\r\n        this.newMsg = '';\r\n        this.content.scrollToBottom();\r\n        await this.chatService.updateMessageInfo();\r\n      } catch (error) {\r\n        console.error('Error sending message:', error);\r\n      }\r\n    }\r\n  }\r\n \r\n  changeLanguage(lang: string) {\r\n    this.translate.use(lang);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // Cleanup subscriptions\r\n    if (this.messageSubscription) {\r\n      this.messageSubscription.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-button color=\"primary\">\r\n        <ion-back-button></ion-back-button>\r\n      </ion-button>\r\n    </ion-buttons>\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button color=\"primary\">\r\n        <ion-icon name=\"call\" slot=\"icon-only\"></ion-icon>\r\n      </ion-button>\r\n    </ion-buttons>\r\n    <ion-title>{{ 'SUPPORT.TITLE' | translate }}</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n \r\n<ion-content class=\"ion-padding\">\r\n \r\n  <ion-grid *ngIf=\"!hideSkeleton\">\r\n    <ion-row *ngFor=\"let message of messages | async\">\r\n      <ion-col size=\"9\" class=\"message\"\r\n        [offset]=\"message.myMsg ? 3 : 0\"\r\n        [ngClass]=\"{ 'my-message': message.myMsg, 'other-message': !message.myMsg }\">\r\n        <div class=\"message-bubble\">\r\n          <div class=\"message-meta\">\r\n            <span class=\"sender\">{{ message.fromName }}</span>\r\n            <span class=\"timestamp\">{{ message.createdAt?.toMillis() | date:'short' }}</span>\r\n          </div>\r\n          <p class=\"message-text\">{{ message.msg }}</p>\r\n        </div>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-grid>\r\n\r\n\r\n  <div *ngIf=\"hideSkeleton\">\r\n    <ion-item lines=\"none\" *ngFor=\"let item of skeletOns\">\r\n      <ion-thumbnail>\r\n        <ion-skeleton-text [animated]=\"true\" style=\"width: 250px; height: 400px;\"></ion-skeleton-text>\r\n      </ion-thumbnail>\r\n    </ion-item>\r\n\r\n    <ion-item lines=\"none\" *ngFor=\"let item of skeletOns\">\r\n      <ion-thumbnail>\r\n        <ion-skeleton-text  [animated]=\"true\" style=\"width: 250px; height: 400px; left: 100px\"></ion-skeleton-text>\r\n      </ion-thumbnail>\r\n    </ion-item>\r\n  </div>\r\n  \r\n  <ion-list class=\"ion-no-padding\" lines=\"none\">\r\n  <ion-img *ngIf=\"hasNoData\" src=\"../../../assets/imgs/chat.svg\"></ion-img>\r\n  <ion-list-header *ngIf=\"hasNoData\" style=\"margin-top: 10%\">\r\n    <ion-label color=\"primary\" class=\"ion-text-center\">\r\n      <h1>{{ 'SUPPORT.RESPOND_IMMEDIATELY' | translate }}</h1>\r\n      <p>{{ 'SUPPORT.TELL_US' | translate }}</p>\r\n    </ion-label>\r\n  </ion-list-header>\r\n</ion-list>\r\n\r\n  <!-- Language Selector FAB -->\r\n  <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\" class=\"language-fab\">\r\n    <ion-fab-button size=\"medium\" color=\"light\">\r\n      <ion-icon name=\"language-outline\"></ion-icon>\r\n    </ion-fab-button>\r\n    <ion-fab-list side=\"top\">\r\n      <ion-fab-button (click)=\"changeLanguage('en')\" color=\"light\" size=\"small\">\r\n            <ion-text>EN</ion-text>\r\n      </ion-fab-button>\r\n      <ion-fab-button (click)=\"changeLanguage('ms')\" color=\"light\" size=\"small\">\r\n            <ion-text>MS</ion-text>\r\n      </ion-fab-button>\r\n    </ion-fab-list>\r\n  </ion-fab>\r\n</ion-content>\r\n \r\n<ion-footer>\r\n  <ion-toolbar color=\"light\">\r\n    <ion-row class=\"ion-align-items-center\">\r\n      <ion-col size=\"10\">\r\n        <ion-textarea autoGrow=\"true\" \r\n                     (ionFocus)=\"Show()\" \r\n                     (ionBlur)=\"Hide()\" \r\n                     [placeholder]=\"'SUPPORT.START_TYPING' | translate\" \r\n                     class=\"message-input\" \r\n                     rows=\"1\" \r\n                     maxLength=\"500\" \r\n                     [(ngModel)]=\"newMsg\">\r\n        </ion-textarea>\r\n      </ion-col>\r\n      <ion-col size=\"2\">\r\n        <ion-button expand=\"block\" \r\n                    fill=\"clear\" \r\n                    color=\"primary\" \r\n                    [disabled]=\"newMsg === ''\"\r\n                    class=\"msg-btn\" \r\n                    (click)=\"sendMessage()\">\r\n          <ion-icon name=\"send\" slot=\"icon-only\"></ion-icon>\r\n        </ion-button>\r\n      </ion-col>\r\n    </ion-row>\r\n  </ion-toolbar>\r\n</ion-footer>\r\n"],"names":["StatusBar","IonContent","authState","i0","SupportPage","constructor","chatService","router","translate","auth","ngOnInit","subscribe","user","initializeChat","navigate","hideSkeleton","loading","messages","getMessage","messageSubscription","next","hasNoData","length","requestAnimationFrame","content","scrollToBottom","error","console","code","queryParams","message","Show","setOverlaysWebView","overlay","Hide","sendMessage","newMsg","trim","addChatMessage","updateMessageInfo","changeLanguage","lang","use","ngOnDestroy","unsubscribe","selectors","viewQuery","ctx"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}