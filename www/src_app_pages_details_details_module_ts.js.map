{"version":3,"file":"src_app_pages_details_details_module_ts.js","mappings":";;;;;;;;;;;;;;;;AACuD;AAEV;;;AAE7C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,sDAAW;KACvB;CACF,CAAC;AAMK,MAAM,wBAAwB;;gGAAxB,wBAAwB;qHAAxB,wBAAwB;yHAHzB,kEAAqB,CAAC,MAAM,CAAC,EAC7B,yDAAY;mIAEX,wBAAwB,oFAFzB,yDAAY;;;;;;;;;;;;;;;;;;;;;;;;;ACbuB;AACmB;AACrB;AACuB;AACvB;AACyB;AACZ;AACC;AACL;;;;;AAe/C,MAAM,iBAAiB;;kFAAjB,iBAAiB;8GAAjB,iBAAiB;kHAX1B,yDAAY;QACZ,uDAAW;QACX,uDAAW;QACX,6EAAwB;QACxB,+DAAmB;QACnB,qEAAkB,CAAC,GAAG,EAAE,CAAC,gEAAa,CAAC,8EAAoB,CAAC,CAAC;QAC7D,+DAAW,CAAC,GAAG,EAAE,CAAC,2DAAO,EAAE,CAAC;QAC5B,yEAAwB,EAAE;mIAIjB,iBAAiB,mBAFb,sDAAW,aATxB,yDAAY;QACZ,uDAAW;QACX,uDAAW;QACX,6EAAwB;QACxB,+DAAmB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChBvB;AACA;AACA;AAKA;;;;;;;;;;;;;;;IC2BYgB,4DAAAA;IAAyDA,oDAAAA;;IAAuCA,0DAAAA;;;;IAAvCA,uDAAAA;IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;IACzDA,4DAAAA;IAA0DA,oDAAAA;;IAAyCA,0DAAAA;;;;IAAzCA,uDAAAA;IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;IAC1DA,4DAAAA;IAA0DA,oDAAAA;;IAAyCA,0DAAAA;;;;IAAzCA,uDAAAA;IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;IAH5DA,4DAAAA;IACEA,wDAAAA;IACAA,wDAAAA;IACAA,wDAAAA;IACFA,0DAAAA;;;;;;;;IAHSA,uDAAAA;IAAAA,wDAAAA;IACAA,uDAAAA;IAAAA,wDAAAA;IACAA,uDAAAA;IAAAA,wDAAAA;;;;;;IAaPA,4DAAAA;IAAyDA,oDAAAA;;IAAsCA,0DAAAA;;;;IAAtCA,uDAAAA;IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;IACzDA,4DAAAA;IAA0DA,oDAAAA;;IAAwCA,0DAAAA;;;;IAAxCA,uDAAAA;IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;IAC1DA,4DAAAA;IAA0DA,oDAAAA;;IAAwCA,0DAAAA;;;;IAAxCA,uDAAAA;IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;IAH5DA,4DAAAA;IACEA,wDAAAA;IACAA,wDAAAA;IACAA,wDAAAA;IACFA,0DAAAA;;;;;;;;IAHSA,uDAAAA;IAAAA,wDAAAA;IACAA,uDAAAA;IAAAA,wDAAAA;IACAA,uDAAAA;IAAAA,wDAAAA;;;;;;IAaPA,4DAAAA;IAAmDA,oDAAAA;;IAAiCA,0DAAAA;;;;IAAjCA,uDAAAA;IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;IACnDA,4DAAAA;IAAuDA,oDAAAA;;IAAoCA,0DAAAA;;;;IAApCA,uDAAAA;IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;IAFzDA,4DAAAA;IACEA,wDAAAA;IACAA,wDAAAA;IACFA,0DAAAA;;;;;;;IAFSA,uDAAAA;IAAAA,wDAAAA;IACAA,uDAAAA;IAAAA,wDAAAA;;;;;;IAUXA,4DAAAA;IAA6BA,oDAAAA;;IAA4BA,0DAAAA;;;;IAA5BA,uDAAAA;IAAAA,+DAAAA,CAAAA,yDAAAA;;;;;;IAC7BA,uDAAAA;;;;;;IACAA,uDAAAA;;;;AD5DF,MAAOC,WAAP,CAAkB;EAStBC,YACUC,OADV,EAEUC,KAFV,EAGUC,WAHV,EAIUC,MAJV,EAKUC,MALV,EAMUC,qBANV,EAOUC,eAPV,EAQUC,kBARV,EAQkD;EACxCC,iBATV,EAUUC,QAVV,EAWUC,SAXV,CAWsC;EAXtC;IACU;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA,4BAER;;IACA,KAAKT,KAAL,CAAWU,kBAAX,CAA+BC,IAAD,IAAS;MACrC,IAAIA,IAAJ,EAAU;QACR,KAAKA,IAAL,GAAYA,IAAZ;QACA,KAAKT,MAAL,CAAYU,OAAZ,GAAsBD,IAAtB,CAFQ,CAEoB;;QAC5B,KAAKE,IAAL,CAAUC,UAAV,CAAqB;UACnBC,QAAQ,EAAEJ,IAAI,CAACK,WAAL,EAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,KAAmC,EAD1B;UAEnBC,QAAQ,EAAEP,IAAI,CAACK,WAAL,EAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,KAAmC,EAF1B;UAGnBE,KAAK,EAAER,IAAI,CAACQ,KAAL,IAAc;QAHF,CAArB;MAKD;IACF,CAVD;EAWD;;EAEDC,QAAQ;IACN,KAAKP,IAAL,GAAY,IAAItB,qDAAJ,CAAc;MACxBwB,QAAQ,EAAE,IAAIzB,uDAAJ,CAAgB,IAAhB,EAAsB;QAC9B+B,UAAU,EAAE,CAAC7B,+DAAD,EAAsBA,gEAAA,CAAqB,CAArB,CAAtB,EAA+CA,gEAAA,CAAqB,GAArB,CAA/C;MADkB,CAAtB,CADc;MAIxB0B,QAAQ,EAAE,IAAI5B,uDAAJ,CAAgB,IAAhB,EAAsB;QAC9B+B,UAAU,EAAE,CAAC7B,+DAAD,EAAsBA,gEAAA,CAAqB,CAArB,CAAtB,EAA+CA,gEAAA,CAAqB,GAArB,CAA/C;MADkB,CAAtB,CAJc;MAOxB2B,KAAK,EAAE,IAAI7B,uDAAJ,CAAgB,IAAhB,EAAsB;QAC3B+B,UAAU,EAAE,CAAC7B,4DAAD,EAAmBA,gEAAA,CAAqB,GAArB,CAAnB;MADe,CAAtB;IAPiB,CAAd,CAAZ;EAWD;;EAEKiC,WAAW,CAACC,MAAD,EAAqB;IAAA;;IAAA;MACpC,IAAI;QACF,MAAMC,KAAK,SAASlC,8DAAA,CAAgB;UAClCoC,OAAO,EAAE,EADyB;UAElCC,YAAY,EAAE,KAFoB;UAGlCC,UAAU,EAAErC,sEAHsB;UAIlCgC,MAAM,EAAEA;QAJ0B,CAAhB,CAApB;;QAOA,IAAIC,KAAJ,EAAW;UACT,MAAMM,OAAO,SAAS,KAAI,CAAC1B,iBAAL,CAAuB2B,MAAvB,EAAtB;UACA,MAAMD,OAAO,CAACE,OAAR,EAAN;;UAEA,IAAI,CAAC,KAAI,CAACjC,MAAL,CAAYU,OAAZ,EAAqBwB,GAA1B,EAA+B;YAC7BH,OAAO,CAACI,OAAR;YACA,MAAMC,KAAK,SAAS,KAAI,CAACjC,eAAL,CAAqB6B,MAArB,CAA4B;cAC9CK,MAAM,EAAE,eADsC;cAE9CC,OAAO,EAAE,yBAFqC;cAG9CC,OAAO,EAAE,CAAC,IAAD;YAHqC,CAA5B,CAApB;YAKA,MAAMH,KAAK,CAACH,OAAN,EAAN;YACA;UACD;;UAED,IAAI;YACF,MAAMO,MAAM,SAAS,KAAI,CAACxC,MAAL,CAAYyC,WAAZ,CAAwBhB,KAAxB,EAA+B,KAAI,CAACzB,MAAL,CAAYU,OAAZ,CAAoBwB,GAAnD,CAArB;YACAH,OAAO,CAACI,OAAR;;YAEA,IAAI,CAACK,MAAL,EAAa;cACX,MAAMJ,KAAK,SAAS,KAAI,CAACjC,eAAL,CAAqB6B,MAArB,CAA4B;gBAC9CK,MAAM,EAAE,eADsC;gBAE9CC,OAAO,EAAE,4CAFqC;gBAG9CC,OAAO,EAAE,CAAC,IAAD;cAHqC,CAA5B,CAApB;cAKA,MAAMH,KAAK,CAACH,OAAN,EAAN;YACD,CAPD,MAOO;cACL,KAAI,CAACS,QAAL,GAAgBF,MAAhB,CADK,CACmB;;cACxB,MAAMJ,KAAK,SAAS,KAAI,CAACjC,eAAL,CAAqB6B,MAArB,CAA4B;gBAC9CK,MAAM,EAAE,mBADsC;gBAE9CC,OAAO,EAAE,6CAFqC;gBAG9CC,OAAO,EAAE,CAAC,IAAD;cAHqC,CAA5B,CAApB;cAKA,MAAMH,KAAK,CAACH,OAAN,EAAN;YACD;UACF,CApBD,CAoBE,OAAOU,WAAP,EAAoB;YACpBZ,OAAO,CAACI,OAAR;;YACA,IAAIQ,WAAW,CAACL,OAAZ,CAAoBM,QAApB,CAA6B,6DAA7B,CAAJ,EAAiG;cAC/F,MAAMR,KAAK,SAAS,KAAI,CAACjC,eAAL,CAAqB6B,MAArB,CAA4B;gBAC9CK,MAAM,EAAE,eADsC;gBAE9CC,OAAO,EAAE,qEAFqC;gBAG9CC,OAAO,EAAE,CAAC,IAAD;cAHqC,CAA5B,CAApB;cAKA,MAAMH,KAAK,CAACH,OAAN,EAAN;YACD,CAPD,MAOO;cACL,MAAMG,KAAK,SAAS,KAAI,CAACjC,eAAL,CAAqB6B,MAArB,CAA4B;gBAC9CK,MAAM,EAAE,eADsC;gBAE9CC,OAAO,EAAE,8CAA8CK,WAAW,CAACL,OAAO,EAF5B;gBAG9CC,OAAO,EAAE,CAAC,IAAD;cAHqC,CAA5B,CAApB;cAKA,MAAMH,KAAK,CAACH,OAAN,EAAN;YACD;UACF;QACF;MACF,CA9DD,CA8DE,OAAOY,KAAP,EAAc;QACd,MAAMT,KAAK,SAAS,KAAI,CAACjC,eAAL,CAAqB6B,MAArB,CAA4B;UAC9CK,MAAM,QAAQ,KAAI,CAAC9B,SAAL,CAAeuC,GAAf,CAAmB,OAAnB,EAA4BC,SAA5B,EADgC;UAE9CT,OAAO,EAAE,SAAS,KAAI,CAAC/B,SAAL,CAAeuC,GAAf,CAAmB,cAAnB,EAAmCC,SAAnC,EAA8C,KAAKF,KAAK,CAACP,OAAO,EAFpC;UAG9CC,OAAO,EAAE,CAAC,IAAD;QAHqC,CAA5B,CAApB;QAKA,MAAMH,KAAK,CAACH,OAAN,EAAN;MACD;IAtEmC;EAuErC;;EAGDe,iCAAiC;IAC/B,KAAKC,sBAAL,GAA8B,KAAK3C,QAAL,CAAc4C,UAAd,CAAyBC,qBAAzB,CAA+C,EAA/C,EAAmD,MAAK;MACpF,KAAKC,gBAAL;IACD,CAF6B,CAA9B;EAGD;;EAEKA,gBAAgB;IAAA;;IAAA;MACpB,IAAI;QACA,MAAM,MAAI,CAACC,oBAAL,EAAN;MACH,CAFD,CAEE,OAAOR,KAAP,EAAc;QACdS,OAAO,CAACT,KAAR,CAAc,6BAAd,EAA6CA,KAA7C;MACD;IALmB;EAMrB;;EAEKQ,oBAAoB;IAAA;;IAAA;MACxB,MAAMjB,KAAK,SAAS,MAAI,CAACjC,eAAL,CAAqB6B,MAArB,CAA4B;QAC9CK,MAAM,QAAQ,MAAI,CAAC9B,SAAL,CAAeuC,GAAf,CAAmB,UAAnB,EAA+BC,SAA/B,EADgC;QAE9CT,OAAO,QAAQ,MAAI,CAAC/B,SAAL,CAAeuC,GAAf,CAAmB,cAAnB,EAAmCC,SAAnC,EAF+B;QAG9CR,OAAO,EAAE,CACP;UACEgB,IAAI,QAAQ,MAAI,CAAChD,SAAL,CAAeuC,GAAf,CAAmB,QAAnB,EAA6BC,SAA7B,EADd;UAEES,IAAI,EAAE;QAFR,CADO,EAKP;UACED,IAAI,QAAQ,MAAI,CAAChD,SAAL,CAAeuC,GAAf,CAAmB,MAAnB,EAA2BC,SAA3B,EADd;UAEEU,OAAO,EAAE,MAAK;YACZC,SAAS,CAAC,KAAD,CAAT,CAAiBC,OAAjB;UACD;QAJH,CALO;MAHqC,CAA5B,CAApB;MAgBA,MAAMvB,KAAK,CAACH,OAAN,EAAN;IAjBwB;EAkBzB;;EAIK2B,6BAA6B;IAAA;;IAAA;MACjC,MAAMC,WAAW,SAAS,MAAI,CAAC3D,qBAAL,CAA2B8B,MAA3B,CAAkC;QAC1DK,MAAM,QAAQ,MAAI,CAAC9B,SAAL,CAAeuC,GAAf,CAAmB,qBAAnB,EAA0CC,SAA1C,EAD4C;QAE1DR,OAAO,EAAE,CACP;UACEgB,IAAI,QAAQ,MAAI,CAAChD,SAAL,CAAeuC,GAAf,CAAmB,QAAnB,EAA6BC,SAA7B,EADd;UAEEe,IAAI,EAAE,QAFR;UAGEL,OAAO,EAAE,MAAK;YACZ,MAAI,CAAClC,WAAL,CAAiB9B,kEAAjB;UACD;QALH,CADO,EAQP;UACE8D,IAAI,QAAQ,MAAI,CAAChD,SAAL,CAAeuC,GAAf,CAAmB,SAAnB,EAA8BC,SAA9B,EADd;UAEEe,IAAI,EAAE,QAFR;UAGEL,OAAO,EAAE,MAAK;YACZ,MAAI,CAAClC,WAAL,CAAiB9B,kEAAjB;UACD;QALH,CARO,EAeP;UACE8D,IAAI,QAAQ,MAAI,CAAChD,SAAL,CAAeuC,GAAf,CAAmB,MAAnB,EAA2BC,SAA3B,EADd;UAEEe,IAAI,EAAE,UAFR;UAGEL,OAAO,EAAE,MAAK;YACZ,MAAI,CAACO,UAAL;UACD;QALH,CAfO,EAsBP;UACET,IAAI,QAAQ,MAAI,CAAChD,SAAL,CAAeuC,GAAf,CAAmB,QAAnB,EAA6BC,SAA7B,EADd;UAEEe,IAAI,EAAE,OAFR;UAGEN,IAAI,EAAE;QAHR,CAtBO;MAFiD,CAAlC,CAA1B;MA+BA,MAAMK,WAAW,CAAC5B,OAAZ,EAAN;IAhCiC;EAiClC;;EAGK+B,UAAU;IAAA;;IAAA;MACd,MAAMC,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAd;MACAF,KAAK,CAACG,IAAN,GAAa,MAAb;MACAH,KAAK,CAACI,MAAN,GAAe,SAAf;;MACAJ,KAAK,CAACK,QAAN;QAAA,wJAAiB,WAAOC,KAAP,EAAqB;UACpC,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAb;;UACA,IAAIF,IAAJ,EAAU;YACR,MAAMG,MAAM,GAAG,IAAIC,UAAJ,EAAf;;YACAD,MAAM,CAACE,MAAP;cAAA,yJAAgB,WAAOC,CAAP,EAAiB;gBAC/B,MAAMrD,KAAK,GAAG;kBACZsD,YAAY,EAAED,CAAC,CAACL,MAAF,CAASjC,MAAT,CAAgBzB,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B;gBADF,CAAd;gBAKA,MAAMyB,MAAM,SAAS,MAAI,CAACxC,MAAL,CAAYyC,WAAZ,CAAwBhB,KAAxB,EAAwC,MAAI,CAACzB,MAAL,CAAYU,OAAZ,CAAoBwB,GAA5D,CAArB;;gBAEA,IAAI,CAACM,MAAL,EAAa;kBACX,MAAMJ,KAAK,SAAS,MAAI,CAACjC,eAAL,CAAqB6B,MAArB,CAA4B;oBAC9CK,MAAM,EAAE,eADsC;oBAE9CC,OAAO,EAAE,4CAFqC;oBAG9CC,OAAO,EAAE,CAAC,IAAD;kBAHqC,CAA5B,CAApB;kBAKA,MAAMH,KAAK,CAACH,OAAN,EAAN;gBACD,CAPD,MAOO;kBACL,MAAI,CAACS,QAAL,GAAgBF,MAAhB,CADK,CACmB;kBACxB;kBACA;kBACA;kBACA;kBACA;kBACA;gBACD;cACF,CAxBD;;cAAA;gBAAA;cAAA;YAAA;;YAyBAmC,MAAM,CAACK,aAAP,CAAqBR,IAArB;UACD;QACF,CA/BD;;QAAA;UAAA;QAAA;MAAA;;MAgCAP,KAAK,CAACgB,KAAN;IApCc;EAqCf;;EAGKC,6BAA6B;IAAA;;IAAA;MACjC,OAAO,IAAIC,OAAJ;QAAA,yJAAkB,WAAOC,OAAP,EAAgBC,MAAhB,EAA0B;UACjD,IAAI;YACF,MAAM5E,IAAI,GAAG,MAAI,CAACX,KAAL,CAAWwF,WAAxB;YACA,IAAI,CAAC7E,IAAL,EAAW,MAAM,IAAI8E,KAAJ,CAAU,wBAAV,CAAN;YAEXjC,OAAO,CAACkC,GAAR,CAAY,8BAAZ;YACA,MAAMC,oBAAoB,GAAG,qBAA7B;YACA,IAAIC,kBAAkB,GAAGxB,QAAQ,CAACyB,cAAT,CAAwBF,oBAAxB,CAAzB;;YACA,IAAI,CAACC,kBAAL,EAAyB;cACvBA,kBAAkB,GAAGxB,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAArB;cACAuB,kBAAkB,CAACE,EAAnB,GAAwBH,oBAAxB;cACAvB,QAAQ,CAAC2B,IAAT,CAAcC,WAAd,CAA0BJ,kBAA1B;YACD,CAJD,MAIO;cACLA,kBAAkB,CAACK,SAAnB,GAA+B,EAA/B,CADK,CAC8B;YACpC;;YAEDzC,OAAO,CAACkC,GAAR,CAAY,iCAAZ;YACA,MAAMQ,iBAAiB,GAAG,IAAI/G,4DAAJ,CAAsBwG,oBAAtB,EAA4C,EAA5C,EAAgD,MAAI,CAAC3F,KAArD,CAA1B;YACA,MAAMmG,WAAW,GAAGxF,IAAI,CAACwF,WAAzB;;YAEA,IAAI,CAACA,WAAL,EAAkB;cAChB,MAAM,IAAIV,KAAJ,CAAU,8BAAV,CAAN;YACD;;YAED,IAAIW,kBAAJ;;YACA,IAAI;cACF5C,OAAO,CAACkC,GAAR,CAAY,yCAAZ;cACAU,kBAAkB,SAASpH,yEAAqB,CAAC,MAAI,CAACgB,KAAN,EAAamG,WAAb,EAA0BD,iBAA1B,CAAhD;cACA1C,OAAO,CAACkC,GAAR,CAAY,sBAAZ,EAAoCU,kBAApC;YACD,CAJD,CAIE,OAAOrD,KAAP,EAAc;cACdS,OAAO,CAACT,KAAR,CAAc,oCAAd,EAAoDA,KAApD;cAEA,IAAIsD,YAAY,SAAS,MAAI,CAAC5F,SAAL,CAAeuC,GAAf,CAAmB,eAAnB,EAAoCC,SAApC,EAAzB,CAHc,CAKd;;cACA,IAAIF,KAAK,CAACuD,IAAN,KAAe,2BAAnB,EAAgD;gBAC9CD,YAAY,SAAS,MAAI,CAAC5F,SAAL,CAAeuC,GAAf,CAAmB,gBAAnB,EAAqCC,SAArC,EAArB;cACD,CAFD,MAEO,IAAIF,KAAK,CAACuD,IAAN,KAAe,6BAAnB,EAAkD;gBACvDD,YAAY,SAAS,MAAI,CAAC5F,SAAL,CAAeuC,GAAf,CAAmB,eAAnB,EAAoCC,SAApC,EAArB;cACD,CAFM,MAEA,IAAIF,KAAK,CAACuD,IAAN,KAAe,wBAAnB,EAA6C;gBAClDD,YAAY,SAAS,MAAI,CAAC5F,SAAL,CAAeuC,GAAf,CAAmB,aAAnB,EAAkCC,SAAlC,EAArB;cACD;;cAED,MAAI,CAAClD,OAAL,CAAawG,SAAb,OACQ,MAAI,CAAC9F,SAAL,CAAeuC,GAAf,CAAmB,OAAnB,EAA4BC,SAA5B,EADR,EAEEoD,YAFF;;cAIAd,MAAM,CAACxC,KAAD,CAAN;cACA;YACD;;YAED,IAAI,CAACqD,kBAAkB,CAACI,cAAxB,EAAwC;cACtC,MAAM,IAAIf,KAAJ,CAAU,uDAAV,CAAN;YACD;;YAED,MAAMgB,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAlB;YACA,MAAMC,oBAAoB,GAAGH,SAA7B;YACAjD,OAAO,CAACkC,GAAR,CAAY,qBAAqBkB,oBAAjC;YAEApD,OAAO,CAACkC,GAAR,CAAY,sCAAZ;YACA,MAAMpD,KAAK,SAAS,MAAI,CAACjC,eAAL,CAAqB6B,MAArB,CAA4B;cAC9CK,MAAM,EAAE,cADsC;cAE9CsE,MAAM,EAAE,CACN;gBACEC,IAAI,EAAE,kBADR;gBAEExC,IAAI,EAAE,MAFR;gBAGEyC,WAAW,EAAE,yBAHf;gBAIEC,KAAK,EAAEJ,oBAJT,CAI8B;;cAJ9B,CADM,CAFsC;cAU9CnE,OAAO,EAAE,CACP;gBACEgB,IAAI,EAAE,QADR;gBAEEC,IAAI,EAAE,QAFR;gBAGEC,OAAO,EAAE,MAAK;kBACZH,OAAO,CAACkC,GAAR,CAAY,wBAAZ;kBACAH,MAAM,CAAC,IAAIE,KAAJ,CAAU,wBAAV,CAAD,CAAN;gBACD;cANH,CADO,EASP;gBACEhC,IAAI,EAAE,QADR;gBAEEE,OAAO;kBAAA,yJAAE,WAAOsD,IAAP,EAAe;oBACtB,MAAMC,gBAAgB,GAAGD,IAAI,CAACC,gBAA9B;;oBACA,IAAI,CAACA,gBAAL,EAAuB;sBACrB3B,MAAM,CAAC,IAAIE,KAAJ,CAAU,+BAAV,CAAD,CAAN;sBACA;oBACD;;oBACD,IAAI;sBACFjC,OAAO,CAACkC,GAAR,CAAY,0DAAZ;sBACA,MAAMyB,eAAe,GAAG/H,uEAAA,CAA6BgH,kBAAkB,CAACI,cAAhD,EAAgEU,gBAAhE,CAAxB;sBACA,MAAMnI,gFAA4B,CAAC4B,IAAD,EAAOwG,eAAP,CAAlC;sBACAT,YAAY,CAACW,UAAb,CAAwB,YAAxB;sBACA,MAAM,MAAI,CAACxI,aAAL,EAAN;sBACA2E,OAAO,CAACkC,GAAR,CAAY,yCAAZ;sBACAJ,OAAO;oBACR,CARD,CAQE,OAAOvC,KAAP,EAAc;sBACdS,OAAO,CAACT,KAAR,CAAc,8BAAd,EAA8CA,KAA9C;sBACAwC,MAAM,CAACxC,KAAD,CAAN;oBACD;kBACF,CAlBM;;kBAAA,gBAAPY,OAAO;oBAAA;kBAAA;gBAAA;cAFT,CATO;YAVqC,CAA5B,CAApB;YA2CA,MAAMrB,KAAK,CAACH,OAAN,EAAN;UAED,CAxGD,CAwGE,OAAOY,KAAP,EAAc;YACdS,OAAO,CAACT,KAAR,CAAc,sCAAd,EAAsDA,KAAtD;;YACA,MAAI,CAAChD,OAAL,CAAawG,SAAb,CAAuB,OAAvB,EAAgCxD,KAAK,CAACP,OAAN,IAAiB,kDAAjD;;YACA+C,MAAM,CAACxC,KAAD,CAAN;UACD;QACF,CA9GM;;QAAA;UAAA;QAAA;MAAA,IAAP;IADiC;EAgHlC,CA5VqB,CA8VtB;EACA;;;EACMuE,kBAAkB;IAAA;;IAAA;MACtB,IAAI;QACF,MAAM3G,IAAI,GAAG,MAAI,CAACX,KAAL,CAAWwF,WAAxB;QACA,IAAI,CAAC7E,IAAL,EAAW,OAAO,KAAP,CAFT,CAIF;;QACA,IAAIA,IAAI,CAACwF,WAAT,EAAsB;UACpB,IAAI;YACF,MAAM,MAAI,CAACf,6BAAL,EAAN;YACA,OAAO,IAAP;UACD,CAHD,CAGE,OAAOJ,CAAP,EAAU;YACVxB,OAAO,CAACT,KAAR,CAAc,gCAAd,EAAgDiC,CAAhD,EADU,CAEV;UACD;QACF,CAbC,CAeF;;;QACA,IAAIrE,IAAI,CAACQ,KAAT,EAAgB;UACd,aAAa,IAAIkE,OAAJ;YAAA,yJAAqB,WAAOC,OAAP,EAAkB;cAClD,MAAMhD,KAAK,SAAS,MAAI,CAACjC,eAAL,CAAqB6B,MAArB,CAA4B;gBAC9CK,MAAM,EAAE,iBADsC;gBAE9CsE,MAAM,EAAE,CACN;kBACEC,IAAI,EAAE,UADR;kBAEExC,IAAI,EAAE,UAFR;kBAGEyC,WAAW,EAAE;gBAHf,CADM,CAFsC;gBAS9CtE,OAAO,EAAE,CACP;kBACEgB,IAAI,EAAE,QADR;kBAEEC,IAAI,EAAE,QAFR;kBAGEC,OAAO,EAAE,MAAM2B,OAAO,CAAC,KAAD;gBAHxB,CADO,EAMP;kBACE7B,IAAI,EAAE,QADR;kBAEEE,OAAO;oBAAA,yJAAE,WAAOsD,IAAP,EAAe;sBACtB,IAAI;wBACF,MAAMG,UAAU,GAAG/H,uEAAA,CAA6BsB,IAAI,CAACQ,KAAlC,EAA0C8F,IAAI,CAACM,QAA/C,CAAnB;wBACA,MAAMxI,gFAA4B,CAAC4B,IAAD,EAAOyG,UAAP,CAAlC;wBACA9B,OAAO,CAAC,IAAD,CAAP;sBACD,CAJD,CAIE,OAAOkC,GAAP,EAAY;wBACZhE,OAAO,CAACT,KAAR,CAAc,mCAAd,EAAmDyE,GAAnD;;wBACA,MAAI,CAACzH,OAAL,CAAawG,SAAb,OAA6B,MAAI,CAAC9F,SAAL,CAAeuC,GAAf,CAAmB,OAAnB,EAA4BC,SAA5B,EAA7B,EAAsEuE,GAAG,CAAChF,OAAJ,WAAqB,MAAI,CAAC/B,SAAL,CAAeuC,GAAf,CAAmB,eAAnB,EAAoCC,SAApC,EAArB,CAAtE;;wBACAqC,OAAO,CAAC,KAAD,CAAP;sBACD;oBACF,CAVM;;oBAAA,gBAAP3B,OAAO;sBAAA;oBAAA;kBAAA;gBAFT,CANO;cATqC,CAA5B,CAApB;cA+BA,MAAMrB,KAAK,CAACH,OAAN,EAAN;YACD,CAjCY;;YAAA;cAAA;YAAA;UAAA,IAAb;QAkCD;;QAED,OAAO,KAAP;MACD,CAtDD,CAsDE,OAAO6C,CAAP,EAAU;QACVxB,OAAO,CAACT,KAAR,CAAc,0BAAd,EAA0CiC,CAA1C;QACA,OAAO,KAAP;MACD;IA1DqB;EA2DvB;;EAMKnG,aAAa;IAAA;;IAAA;MACjB,IAAI;QACF,IAAI,CAAC,MAAI,CAACgC,IAAL,CAAU4G,KAAf,EAAsB;UACpB,MAAI,CAAC5G,IAAL,CAAU6G,gBAAV;;UACA;QACD;;QACD,MAAI,CAACC,QAAL,GAAgB,IAAhB;QAEA,MAAMhH,IAAI,GAAG,MAAI,CAACX,KAAL,CAAWwF,WAAxB;;QACA,IAAI7E,IAAJ,EAAU;UACR6C,OAAO,CAACkC,GAAR,CAAY,oBAAZ,EAAkC/E,IAAlC,EADQ,CAGR;;UACA6C,OAAO,CAACkC,GAAR,CAAY,qBAAZ;UACA,MAAM7G,iEAAa,CAAC8B,IAAD,EAAO;YACxBK,WAAW,EAAE,GAAG,MAAI,CAACH,IAAL,CAAUmG,KAAV,CAAgBjG,QAAQ,IAAI,MAAI,CAACF,IAAL,CAAUmG,KAAV,CAAgB9F,QAAQ,EAD5C;YAExB0G,QAAQ,EAAE,MAAI,CAAChF;UAFS,CAAP,CAAnB,CALQ,CAUR;;UACA,IAAI,MAAI,CAAC/B,IAAL,CAAUmG,KAAV,CAAgB7F,KAAhB,IAAyBR,IAAI,CAACQ,KAAL,KAAe,MAAI,CAACN,IAAL,CAAUmG,KAAV,CAAgB7F,KAA5D,EAAmE;YACjE;YACA,MAAMmB,KAAK,SAAS,MAAI,CAACjC,eAAL,CAAqB6B,MAArB,CAA4B;cAC9CK,MAAM,QAAQ,MAAI,CAAC9B,SAAL,CAAeuC,GAAf,CAAmB,cAAnB,EAAmCC,SAAnC,EADgC;cAE9CT,OAAO,QAAQ,MAAI,CAAC/B,SAAL,CAAeuC,GAAf,CAAmB,qBAAnB,EAA0CC,SAA1C,EAF+B;cAG9CR,OAAO,EAAE,CACP;gBACEgB,IAAI,QAAQ,MAAI,CAAChD,SAAL,CAAeuC,GAAf,CAAmB,QAAnB,EAA6BC,SAA7B,EADd;gBAEES,IAAI,EAAE;cAFR,CADO,EAKP;gBACED,IAAI,QAAQ,MAAI,CAAChD,SAAL,CAAeuC,GAAf,CAAmB,UAAnB,EAA+BC,SAA/B,EADd;gBAEEU,OAAO;kBAAA,yJAAE,aAAW;oBAClB,IAAI;sBACF,MAAM/E,+DAAW,CAAC+B,IAAD,EAAO,MAAI,CAACE,IAAL,CAAUmG,KAAV,CAAgB7F,KAAvB,CAAjB,CADE,CAEF;;sBACA,MAAMlC,yEAAqB,CAAC0B,IAAD,CAA3B,CAHE,CAKF;;sBACA,MAAM,MAAI,CAACN,eAAL,CAAqB6B,MAArB,CAA4B;wBAChCK,MAAM,QAAQ,MAAI,CAAC9B,SAAL,CAAeuC,GAAf,CAAmB,yBAAnB,EAA8CC,SAA9C,EADkB;wBAEhCT,OAAO,QAAQ,MAAI,CAAC/B,SAAL,CAAeuC,GAAf,CAAmB,aAAnB,EAAkCC,SAAlC,EAFiB;wBAGhCR,OAAO,EAAE,CAAC,IAAD;sBAHuB,CAA5B,EAIHoF,IAJG,CAIEvF,KAAK,IAAIA,KAAK,CAACH,OAAN,EAJX,CAAN;oBAKD,CAXD,CAWE,OAAOY,KAAP,EAAc;sBACd,IAAIA,KAAK,IAAIA,KAAK,CAACuD,IAAN,KAAe,4BAA5B,EAA0D;wBACxD,MAAMwB,QAAQ,SAAS,MAAI,CAACR,kBAAL,EAAvB;;wBACA,IAAIQ,QAAJ,EAAc;0BACZ,IAAI;4BACF,MAAMC,SAAS,GAAG,MAAI,CAAC/H,KAAL,CAAWwF,WAA7B;;4BACA,IAAIuC,SAAJ,EAAe;8BACb,MAAMnJ,+DAAW,CAACmJ,SAAD,EAAY,MAAI,CAAClH,IAAL,CAAUmG,KAAV,CAAgB7F,KAA5B,CAAjB;8BACA,MAAMlC,yEAAqB,CAAC8I,SAAD,CAA3B;8BACA,MAAM,MAAI,CAAC1H,eAAL,CAAqB6B,MAArB,CAA4B;gCAChCK,MAAM,QAAQ,MAAI,CAAC9B,SAAL,CAAeuC,GAAf,CAAmB,yBAAnB,EAA8CC,SAA9C,EADkB;gCAEhCT,OAAO,QAAQ,MAAI,CAAC/B,SAAL,CAAeuC,GAAf,CAAmB,aAAnB,EAAkCC,SAAlC,EAFiB;gCAGhCR,OAAO,EAAE,CAAC,IAAD;8BAHuB,CAA5B,EAIHoF,IAJG,CAIEG,CAAC,IAAIA,CAAC,CAAC7F,OAAF,EAJP,CAAN;4BAKD;0BACF,CAXD,CAWE,OAAO8F,IAAP,EAAa;4BACbzE,OAAO,CAACT,KAAR,CAAc,+CAAd,EAA+DkF,IAA/D;;4BACA,MAAI,CAAClI,OAAL,CAAawG,SAAb,OAA6B,MAAI,CAAC9F,SAAL,CAAeuC,GAAf,CAAmB,OAAnB,EAA4BC,SAA5B,EAA7B,EAAsEgF,IAAI,CAACzF,OAAL,WAAsB,MAAI,CAAC/B,SAAL,CAAeuC,GAAf,CAAmB,eAAnB,EAAoCC,SAApC,EAAtB,CAAtE;;4BACA;0BACD;wBACF,CAjBD,MAiBO;0BACL;0BACA,MAAI,CAAClD,OAAL,CAAawG,SAAb,OAA6B,MAAI,CAAC9F,SAAL,CAAeuC,GAAf,CAAmB,OAAnB,EAA4BC,SAA5B,EAA7B,QAA4E,MAAI,CAACxC,SAAL,CAAeuC,GAAf,CAAmB,aAAnB,EAAkCC,SAAlC,EAA5E;;0BACA;wBACD;sBACF,CAxBD,MAwBO;wBACL,MAAI,CAAClD,OAAL,CAAawG,SAAb,OAA6B,MAAI,CAAC9F,SAAL,CAAeuC,GAAf,CAAmB,OAAnB,EAA4BC,SAA5B,EAA7B,EAAsEF,KAAK,EAAEP,OAAP,WAAwB,MAAI,CAAC/B,SAAL,CAAeuC,GAAf,CAAmB,eAAnB,EAAoCC,SAApC,EAAxB,CAAtE;;wBACA;sBACD;oBACF,CAzCiB,CA2ClB;;;oBACA,IAAI;sBACF,MAAM,MAAI,CAAC/C,MAAL,CAAYgI,UAAZ,CACJ,GAAG,MAAI,CAACrH,IAAL,CAAUmG,KAAV,CAAgBjG,QAAQ,IAAI,MAAI,CAACF,IAAL,CAAUmG,KAAV,CAAgB9F,QAAQ,EADnD,EAEJ,MAAI,CAACL,IAAL,CAAUmG,KAAV,CAAgB7F,KAFZ,EAGJ,MAAI,CAACyB,QAHD,EAIJjC,IAAI,CAACwF,WAJD,EAKJxF,IAAI,CAACyB,GALD,CAAN;sBAOA,MAAI,CAACuF,QAAL,GAAgB,KAAhB;;sBACA,MAAI,CAACxH,MAAL,CAAYgI,aAAZ,CAA0B,MAA1B;;sBACA3E,OAAO,CAACkC,GAAR,CAAY,iBAAZ;oBACD,CAXD,CAWE,OAAO0C,SAAP,EAAkB;sBAClB5E,OAAO,CAACT,KAAR,CAAc,mDAAd,EAAmEqF,SAAnE;;sBACA,MAAI,CAACrI,OAAL,CAAawG,SAAb,OAA6B,MAAI,CAAC9F,SAAL,CAAeuC,GAAf,CAAmB,OAAnB,EAA4BC,SAA5B,EAA7B,EAAsEmF,SAAS,EAAE5F,OAAX,WAA4B,MAAI,CAAC/B,SAAL,CAAeuC,GAAf,CAAmB,eAAnB,EAAoCC,SAApC,EAA5B,CAAtE;;sBACA,MAAI,CAAC0E,QAAL,GAAgB,KAAhB;oBACD;kBACF,CA5DM;;kBAAA,gBAAPhE,OAAO;oBAAA;kBAAA;gBAAA;cAFT,CALO;YAHqC,CAA5B,CAApB;YA0EA,MAAMrB,KAAK,CAACH,OAAN,EAAN,CA5EiE,CA6EjE;;YACA;UACD,CA1FO,CA4FR;;;UACA,MAAM,MAAI,CAACjC,MAAL,CAAYgI,UAAZ,CACJ,GAAG,MAAI,CAACrH,IAAL,CAAUmG,KAAV,CAAgBjG,QAAQ,IAAI,MAAI,CAACF,IAAL,CAAUmG,KAAV,CAAgB9F,QAAQ,EADnD,EAEJ,MAAI,CAACL,IAAL,CAAUmG,KAAV,CAAgB7F,KAFZ,EAGJ,MAAI,CAACyB,QAHD,EAIJjC,IAAI,CAACwF,WAJD,EAKJxF,IAAI,CAACyB,GALD,CAAN;UAQA,MAAI,CAACuF,QAAL,GAAgB,KAAhB;;UACA,MAAI,CAACxH,MAAL,CAAYgI,aAAZ,CAA0B,MAA1B;;UACA3E,OAAO,CAACkC,GAAR,CAAY,iBAAZ;QACD;MACF,CAjHD,CAiHE,OAAOV,CAAP,EAAe;QACfxB,OAAO,CAACT,KAAR,CAAc,yCAAd,EAAyDiC,CAAzD;QACA,MAAI,CAAC2C,QAAL,GAAgB,KAAhB;;QACA,IAAI3C,CAAC,CAACsB,IAAF,KAAW,2BAAf,EAA4C;UAC1C,MAAI,CAACvG,OAAL,CAAawG,SAAb,OACQ,MAAI,CAAC9F,SAAL,CAAeuC,GAAf,CAAmB,OAAnB,EAA4BC,SAA5B,EADR,QAEQ,MAAI,CAACxC,SAAL,CAAeuC,GAAf,CAAmB,cAAnB,EAAmCC,SAAnC,EAFR;QAID,CALD,MAKO,IAAI+B,CAAC,CAACsB,IAAF,KAAW,4BAAf,EAA6C;UAClD,MAAI,CAAClB,6BAAL;QACD,CAFM,MAEA;UACL,MAAI,CAACrF,OAAL,CAAawG,SAAb,OACQ,MAAI,CAAC9F,SAAL,CAAeuC,GAAf,CAAmB,OAAnB,EAA4BC,SAA5B,EADR,EAEE+B,CAAC,CAACxC,OAAF,WAAmB,MAAI,CAAC/B,SAAL,CAAeuC,GAAf,CAAmB,eAAnB,EAAoCC,SAApC,EAAnB,CAFF;QAID;MACF;IAlIgB;EAmIlB;;EASKoF,gBAAgB;IAAA;;IAAA;MACpB,IAAI;QACF,MAAMC,QAAQ,GAAG,IAAIpJ,6DAAJ,EAAjB;QACA,MAAMwD,MAAM,SAAS5D,mEAAe,CAAC,MAAI,CAACkB,KAAN,EAAasI,QAAb,CAApC;QACA,MAAM3H,IAAI,GAAG+B,MAAM,CAAC/B,IAApB;;QAEA,IAAIA,IAAJ,EAAU;UACR,MAAI,CAACiC,QAAL,GAAgBjC,IAAI,CAACiH,QAAL,IAAiB,EAAjC,CADQ,CAC6B;;UAErC,MAAI,CAAC/G,IAAL,CAAUC,UAAV,CAAqB;YACnBC,QAAQ,EAAEJ,IAAI,CAACK,WAAL,EAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,KAAmC,EAD1B;YAEnBC,QAAQ,EAAEP,IAAI,CAACK,WAAL,EAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,KAAmC,EAF1B;YAGnBE,KAAK,EAAER,IAAI,CAACQ,KAAL,IAAc;UAHF,CAArB;;UAMAqC,OAAO,CAACkC,GAAR,CAAY,4BAAZ,EAA0C/E,IAA1C;UACA6C,OAAO,CAACkC,GAAR,CAAY,QAAZ,EAAsB/E,IAAI,CAACQ,KAA3B;UACAqC,OAAO,CAACkC,GAAR,CAAY,eAAZ,EAA6B/E,IAAI,CAACK,WAAlC;UACAwC,OAAO,CAACkC,GAAR,CAAY,YAAZ,EAA0B/E,IAAI,CAACiH,QAA/B,EAZQ,CAcR;;UACA,MAAM,MAAI,CAAC/I,aAAL,EAAN;QACD;MACF,CAtBD,CAsBE,OAAOkE,KAAP,EAAc;QACdS,OAAO,CAACT,KAAR,CAAc,6BAAd,EAA6CA,KAA7C;;QACA,MAAI,CAAChD,OAAL,CAAawG,SAAb,CAAuB,gBAAvB,EAAyC,6CAAzC;MACD;IA1BmB;EA2BrB;;EAEDgC,cAAc,CAACC,IAAD,EAAa;IACzB,KAAK/H,SAAL,CAAegI,GAAf,CAAmBD,IAAnB;IACA9B,YAAY,CAACgC,OAAb,CAAqB,UAArB,EAAiCF,IAAjC;EACD;;AA7kBqB;;;mBAAX3I,aAAWD,+DAAAA,CAAAA,4EAAAA,GAAAA,+DAAAA,CAAAA,oDAAAA,GAAAA,+DAAAA,CAAAA,sEAAAA,GAAAA,+DAAAA,CAAAA,0EAAAA,GAAAA,+DAAAA,CAAAA,oDAAAA,GAAAA,+DAAAA,CAAAA,kEAAAA,GAAAA,+DAAAA,CAAAA,4DAAAA,GAAAA,+DAAAA,CAAAA,qFAAAA,GAAAA,+DAAAA,CAAAA,8DAAAA,GAAAA,+DAAAA,CAAAA,qDAAAA,GAAAA,+DAAAA,CAAAA,kEAAAA;AAAA;;;QAAXC;EAAW8I;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MClBxBnJ,4DAAAA,qBAAmE,CAAnE,EAAmE,UAAnE,EAAmE,CAAnE,EAAmE,iBAAnE,EAAmE,CAAnE,EAAmE,CAAnE,EAAmE,WAAnE,EAAmE,CAAnE,EAAmE,CAAnE,EAAmE,IAAnE;MAIYA,oDAAAA;;MAAiCA,0DAAAA;MAIzCA,4DAAAA,yBAA8C,CAA9C,EAA8C,MAA9C,EAA8C,CAA9C,EAA8C,CAA9C,EAA8C,KAA9C,EAA8C,CAA9C,EAA8C,EAA9C,EAA8C,UAA9C,EAA8C,CAA9C;MAkBQA,uDAAAA;;MAOFA,0DAAAA;MACAA,wDAAAA;MAMAA,4DAAAA;MACEA,uDAAAA;;MAOFA,0DAAAA;MACAA,wDAAAA;MAMAA,4DAAAA;MACEA,uDAAAA;;MAOFA,0DAAAA;MACAA,wDAAAA;MAIFA,0DAAAA;MAKFA,uDAAAA;MAEAA,4DAAAA;MAA8FA,wDAAAA;QAAA,OAASoJ,mBAAT;MAAwB,CAAxB;MAC5FpJ,wDAAAA;MACAA,wDAAAA;MACAA,wDAAAA;MACFA,0DAAAA;MAWNA,4DAAAA;MACEA,uDAAAA;MAIAA,4DAAAA,oBAA8E,EAA9E,EAA8E,gBAA9E,EAA8E,EAA9E;MAEIA,uDAAAA;MACFA,0DAAAA;MACAA,4DAAAA,yBAAyB,EAAzB,EAAyB,gBAAzB,EAAyB,EAAzB;MACkBA,wDAAAA;QAAA,OAASoJ,mBAAe,IAAf,CAAT;MAA6B,CAA7B;MACVpJ,4DAAAA;MAAUA,oDAAAA;MAAEA,0DAAAA;MAElBA,4DAAAA;MAAgBA,wDAAAA;QAAA,OAASoJ,mBAAe,IAAf,CAAT;MAA6B,CAA7B;MACVpJ,4DAAAA;MAAUA,oDAAAA;MAAEA,0DAAAA;;;;;;;;;;MAxGZA,wDAAAA;MAIAA,uDAAAA;MAAAA,+DAAAA,CAAAA,yDAAAA;MAkBAA,uDAAAA;MAAAA,wDAAAA;MAG2BA,uDAAAA;MAAAA,yDAAAA;MAGzBA,uDAAAA;MAAAA,wDAAAA,gBAAAA,yDAAAA;MAMsEA,uDAAAA;MAAAA,wDAAAA;MAM7CA,uDAAAA;MAAAA,yDAAAA;MAGzBA,uDAAAA;MAAAA,wDAAAA,gBAAAA,yDAAAA;MAMsEA,uDAAAA;MAAAA,wDAAAA;MAM7CA,uDAAAA;MAAAA,yDAAAA;MAGzBA,uDAAAA;MAAAA,wDAAAA,gBAAAA,yDAAAA;MAMsEA,uDAAAA;MAAAA,wDAAAA;MAWzBA,uDAAAA;MAAAA,wDAAAA;MACvCA,uDAAAA;MAAAA,wDAAAA;MACDA,uDAAAA;MAAAA,wDAAAA;MACQA,uDAAAA;MAAAA,wDAAAA;;;;;;;;;;;;;;;;;;;;;;;AC7E3B;;;AAMM,MAAOwJ,kBAAP,CAAyB;EAC7BtJ,YACUuJ,OADV,EAC0B;IAAhB;EACL;;EAEC1G,WAAW,CAAChB,KAAD,EAAa;IAAA;;IAAA;MAC5B,MAAM2H,IAAI,GAAG,UAAU,IAAIC,IAAJ,GAAWC,OAAX,EAAoB,MAA3C;MACA,MAAMC,UAAU,GAAGR,0DAAG,CAAC,KAAI,CAACI,OAAN,EAAeC,IAAf,CAAtB;MACA,MAAMI,YAAY,SAASR,mEAAY,CAACO,UAAD,EAAa9H,KAAK,CAACsD,YAAnB,EAAiC,QAAjC,CAAvC;MAEA,OAAOkE,qEAAc,CAACO,YAAY,CAACT,GAAd,CAArB;IAL4B;EAM7B;;AAX4B;;;mBAAlBG,oBAAkBxJ,sDAAAA,CAAAA,0DAAAA;AAAA;;;SAAlBwJ;EAAkBO,SAAlBP,kBAAkB;EAAAQ,YAFjB","sources":["./src/app/pages/details/details-routing.module.ts","./src/app/pages/details/details.module.ts","./src/app/pages/details/details.page.ts","./src/app/pages/details/details.page.html","./src/app/services/image-upload.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DetailsPage } from './details.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DetailsPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DetailsPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { DetailsPageRoutingModule } from './details-routing.module';\r\nimport { DetailsPage } from './details.page';\r\nimport { initializeApp, provideFirebaseApp } from '@angular/fire/app';\r\nimport { getAuth, provideAuth } from '@angular/fire/auth';\r\nimport { environment } from 'src/environments/environment';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DetailsPageRoutingModule,\r\n    ReactiveFormsModule,\r\n    provideFirebaseApp(() => initializeApp(environment.firebase)),\r\n    provideAuth(() => getAuth()),\r\n    TranslateModule.forChild()\r\n  ],\r\n  declarations: [DetailsPage]\r\n})\r\nexport class DetailsPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Auth, updateEmail, updateProfile, User, signInWithPopup, reauthenticateWithCredential, signInWithPhoneNumber, sendEmailVerification } from '@angular/fire/auth';\r\nimport { GoogleAuthProvider, RecaptchaVerifier, PhoneAuthProvider, EmailAuthProvider } from 'firebase/auth';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { AvatarService } from 'src/app/services/avatar.service';\r\nimport { OverlayService } from 'src/app/services/overlay.service';\r\nimport { Camera, CameraResultType, CameraSource, Photo } from '@capacitor/camera';\r\nimport { ActionSheetController, AlertController, LoadingController, Platform } from '@ionic/angular';\r\nimport { ImageUploadService } from 'src/app/services/image-upload.service'; // Import the service\r\nimport { TranslateService } from '@ngx-translate/core'; // Add this import\r\n\r\n@Component({\r\n  selector: 'app-details',\r\n  templateUrl: './details.page.html',\r\n  styleUrls: ['./details.page.scss'],\r\n})\r\nexport class DetailsPage implements OnInit {\r\n\r\n  form: FormGroup;\r\n  imageUrl: string;\r\n  approve: boolean;\r\n  approve2: boolean;\r\n  user: User;\r\n  backButtonSubscription: any;\r\n\r\n  constructor(\r\n    private overlay: OverlayService,\r\n    private authy: Auth,\r\n    private authService: AuthService,\r\n    private avatar: AvatarService,\r\n    private router: Router,\r\n    private actionSheetController: ActionSheetController,\r\n    private alertController: AlertController,\r\n    private imageUploadService: ImageUploadService, // Inject the service\r\n    private loadingController: LoadingController,\r\n    private platform: Platform,\r\n    private translate: TranslateService // Add TranslateService\r\n  ) {\r\n    // Ensure the user is authenticated\r\n    this.authy.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        this.user = user;\r\n        this.avatar.profile = user; // Ensure the profile is set\r\n        this.form.patchValue({\r\n          fullname: user.displayName?.split(' ')[0] || '',\r\n          lastname: user.displayName?.split(' ')[1] || '',\r\n          email: user.email || ''\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.form = new FormGroup({\r\n      fullname: new FormControl(null, {\r\n        validators: [Validators.required, Validators.minLength(1), Validators.maxLength(200)]\r\n      }),\r\n      lastname: new FormControl(null, {\r\n        validators: [Validators.required, Validators.minLength(1), Validators.maxLength(200)]\r\n      }),\r\n      email: new FormControl(null, {\r\n        validators: [Validators.email, Validators.maxLength(200)]\r\n      })\r\n    });\r\n  }\r\n\r\n  async changeImage(source: CameraSource) {\r\n    try {\r\n      const image = await Camera.getPhoto({\r\n        quality: 90,\r\n        allowEditing: false,\r\n        resultType: CameraResultType.Base64,\r\n        source: source,\r\n      });\r\n  \r\n      if (image) {\r\n        const loading = await this.loadingController.create();\r\n        await loading.present();\r\n  \r\n        if (!this.avatar.profile?.uid) {\r\n          loading.dismiss();\r\n          const alert = await this.alertController.create({\r\n            header: 'Upload failed',\r\n            message: 'Profile UID is missing.',\r\n            buttons: ['OK'],\r\n          });\r\n          await alert.present();\r\n          return;\r\n        }\r\n  \r\n        try {\r\n          const result = await this.avatar.uploadImage(image, this.avatar.profile.uid);\r\n          loading.dismiss();\r\n  \r\n          if (!result) {\r\n            const alert = await this.alertController.create({\r\n              header: 'Upload failed',\r\n              message: 'There was a problem uploading your avatar.',\r\n              buttons: ['OK'],\r\n            });\r\n            await alert.present();\r\n          } else {\r\n            this.imageUrl = result; // Ensure imageUrl is updated\r\n            const alert = await this.alertController.create({\r\n              header: 'Upload Successful',\r\n              message: 'Your avatar has been successfully uploaded.',\r\n              buttons: ['OK'],\r\n            });\r\n            await alert.present();\r\n          }\r\n        } catch (uploadError) {\r\n          loading.dismiss();\r\n          if (uploadError.message.includes('Photo URL is required and must be less than 1000 characters')) {\r\n            const alert = await this.alertController.create({\r\n              header: 'Upload failed',\r\n              message: 'The image is too big. Please try another image with a smaller size.',\r\n              buttons: ['OK'],\r\n            });\r\n            await alert.present();\r\n          } else {\r\n            const alert = await this.alertController.create({\r\n              header: 'Upload failed',\r\n              message: `There was a problem uploading your avatar: ${uploadError.message}`,\r\n              buttons: ['OK'],\r\n            });\r\n            await alert.present();\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      const alert = await this.alertController.create({\r\n        header: await this.translate.get('ERROR').toPromise(),\r\n        message: `${await this.translate.get('UPLOAD_ERROR').toPromise()}: ${error.message}`,\r\n        buttons: ['OK'],\r\n      });\r\n      await alert.present();\r\n    }\r\n  }\r\n\r\n\r\n  initializeBackButtonCustomHandler() {\r\n    this.backButtonSubscription = this.platform.backButton.subscribeWithPriority(10, () => {\r\n      this.handleBackButton();\r\n    });\r\n  }\r\n\r\n  async handleBackButton() {\r\n    try {\r\n        await this.showExitConfirmation();\r\n    } catch (error) {\r\n      console.error('Error handling back button:', error);\r\n    }\r\n  }\r\n\r\n  async showExitConfirmation() {\r\n    const alert = await this.alertController.create({\r\n      header: await this.translate.get('EXIT_APP').toPromise(),\r\n      message: await this.translate.get('EXIT_CONFIRM').toPromise(),\r\n      buttons: [\r\n        {\r\n          text: await this.translate.get('CANCEL').toPromise(),\r\n          role: 'cancel'\r\n        },\r\n        {\r\n          text: await this.translate.get('EXIT').toPromise(),\r\n          handler: () => {\r\n            navigator['app'].exitApp();\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    await alert.present();\r\n  }\r\n  \r\n\r\n\r\n  async presentImageSourceActionSheet() {\r\n    const actionSheet = await this.actionSheetController.create({\r\n      header: await this.translate.get('SELECT_IMAGE_SOURCE').toPromise(),\r\n      buttons: [\r\n        {\r\n          text: await this.translate.get('CAMERA').toPromise(),\r\n          icon: 'camera',\r\n          handler: () => {\r\n            this.changeImage(CameraSource.Camera);\r\n          }\r\n        },\r\n        {\r\n          text: await this.translate.get('GALLERY').toPromise(),\r\n          icon: 'images',\r\n          handler: () => {\r\n            this.changeImage(CameraSource.Photos);\r\n          }\r\n        },\r\n        {\r\n          text: await this.translate.get('FILE').toPromise(),\r\n          icon: 'document',\r\n          handler: () => {\r\n            this.selectFile();\r\n          }\r\n        },\r\n        {\r\n          text: await this.translate.get('CANCEL').toPromise(),\r\n          icon: 'close',\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n    await actionSheet.present();\r\n  }\r\n\r\n\r\n  async selectFile() {\r\n    const input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.accept = 'image/*';\r\n    input.onchange = async (event: any) => {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        const reader = new FileReader();\r\n        reader.onload = async (e: any) => {\r\n          const image = {\r\n            base64String: e.target.result.split(',')[1]\r\n          };\r\n  \r\n\r\n          const result = await this.avatar.uploadImage(image as Photo, this.avatar.profile.uid);\r\n  \r\n          if (!result) {\r\n            const alert = await this.alertController.create({\r\n              header: 'Upload failed',\r\n              message: 'There was a problem uploading your avatar.',\r\n              buttons: ['OK'],\r\n            });\r\n            await alert.present();\r\n          } else {\r\n            this.imageUrl = result; // Ensure imageUrl is updated\r\n            // const alert = await this.alertController.create({\r\n            //   header: 'Upload Successful',\r\n            //   message: 'Your avatar has been successfully uploaded.',\r\n            //   buttons: ['OK'],\r\n            // });\r\n            // await alert.present();\r\n          }\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    };\r\n    input.click();\r\n  }\r\n  \r\n\r\n  async reauthenticateWithPhoneNumber(): Promise<void> {\r\n    return new Promise<void>(async (resolve, reject) => {\r\n      try {\r\n        const user = this.authy.currentUser;\r\n        if (!user) throw new Error('User not authenticated');\r\n  \r\n        console.log('Creating reCAPTCHA container');\r\n        const recaptchaContainerId = 'recaptcha-container';\r\n        let recaptchaContainer = document.getElementById(recaptchaContainerId);\r\n        if (!recaptchaContainer) {\r\n          recaptchaContainer = document.createElement('div');\r\n          recaptchaContainer.id = recaptchaContainerId;\r\n          document.body.appendChild(recaptchaContainer);\r\n        } else {\r\n          recaptchaContainer.innerHTML = ''; // Clear any existing content\r\n        }\r\n  \r\n        console.log('Initializing reCAPTCHA verifier');\r\n        const recaptchaVerifier = new RecaptchaVerifier(recaptchaContainerId, {}, this.authy);\r\n        const phoneNumber = user.phoneNumber;\r\n  \r\n        if (!phoneNumber) {\r\n          throw new Error('User phone number is missing');\r\n        }\r\n  \r\n        let verificationResult;\r\n        try {\r\n          console.log('Attempting to sign in with phone number');\r\n          verificationResult = await signInWithPhoneNumber(this.authy, phoneNumber, recaptchaVerifier);\r\n          console.log('Verification result:', verificationResult);\r\n        } catch (error) {\r\n          console.error('Error during signInWithPhoneNumber', error);\r\n          \r\n          let errorMessage = await this.translate.get('SIGN_IN_ERROR').toPromise();\r\n          \r\n          // Handle specific error codes\r\n          if (error.code === 'auth/invalid-phone-number') {\r\n            errorMessage = await this.translate.get('MOBILE_INVALID').toPromise();\r\n          } else if (error.code === 'auth/network-request-failed') {\r\n            errorMessage = await this.translate.get('NETWORK_ERROR').toPromise();\r\n          } else if (error.code === 'auth/too-many-requests') {\r\n            errorMessage = await this.translate.get('PLEASE_WAIT').toPromise();\r\n          }\r\n          \r\n          this.overlay.showAlert(\r\n            await this.translate.get('ERROR').toPromise(),\r\n            errorMessage\r\n          );\r\n          reject(error);\r\n          return;\r\n        }\r\n  \r\n        if (!verificationResult.verificationId) {\r\n          throw new Error('Verification ID is missing in the verification result');\r\n        }\r\n  \r\n        const storedOTP = localStorage.getItem('defaultOTP');\r\n        const userVerificationCode = storedOTP;\r\n        console.log(\"This is number: \" + userVerificationCode)\r\n  \r\n        console.log('Prompting user for verification code');\r\n        const alert = await this.alertController.create({\r\n          header: 'Verification',\r\n          inputs: [\r\n            {\r\n              name: 'verificationCode',\r\n              type: 'text',\r\n              placeholder: 'Enter verification code',\r\n              value: userVerificationCode // Set default value if isRandom is true\r\n            }\r\n          ],\r\n          buttons: [\r\n            {\r\n              text: 'Cancel',\r\n              role: 'cancel',\r\n              handler: () => {\r\n                console.log('Verification cancelled');\r\n                reject(new Error('Verification cancelled'));\r\n              }\r\n            },\r\n            {\r\n              text: 'Verify',\r\n              handler: async (data) => {\r\n                const verificationCode = data.verificationCode;\r\n                if (!verificationCode) {\r\n                  reject(new Error('Verification code is required'));\r\n                  return;\r\n                }\r\n                try {\r\n                  console.log('Attempting to verify phone number with verification code');\r\n                  const phoneCredential = PhoneAuthProvider.credential(verificationResult.verificationId, verificationCode);\r\n                  await reauthenticateWithCredential(user, phoneCredential);\r\n                  localStorage.removeItem('defaultOTP');\r\n                  await this.updateProfile();\r\n                  console.log('User re-authenticated with phone number');\r\n                  resolve();\r\n                } catch (error) {\r\n                  console.error('Error verifying phone number', error);\r\n                  reject(error);\r\n                }\r\n              }\r\n            }\r\n          ]\r\n        });\r\n        await alert.present();\r\n  \r\n      } catch (error) {\r\n        console.error('Error during phone re-authentication', error);\r\n        this.overlay.showAlert('Error', error.message || 'An error occurred during phone re-authentication');\r\n        reject(error);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Try to re-authenticate the user using available methods.\r\n  // Returns true if re-authentication succeeded, false otherwise.\r\n  async reauthenticateUser(): Promise<boolean> {\r\n    try {\r\n      const user = this.authy.currentUser;\r\n      if (!user) return false;\r\n\r\n      // Prefer phone-based re-authentication if phoneNumber exists\r\n      if (user.phoneNumber) {\r\n        try {\r\n          await this.reauthenticateWithPhoneNumber();\r\n          return true;\r\n        } catch (e) {\r\n          console.error('Phone re-authentication failed', e);\r\n          // continue to password fallback\r\n        }\r\n      }\r\n\r\n      // If user has an email, prompt for password to re-authenticate\r\n      if (user.email) {\r\n        return await new Promise<boolean>(async (resolve) => {\r\n          const alert = await this.alertController.create({\r\n            header: 'Re-authenticate',\r\n            inputs: [\r\n              {\r\n                name: 'password',\r\n                type: 'password',\r\n                placeholder: 'Enter your password'\r\n              }\r\n            ],\r\n            buttons: [\r\n              {\r\n                text: 'Cancel',\r\n                role: 'cancel',\r\n                handler: () => resolve(false)\r\n              },\r\n              {\r\n                text: 'Verify',\r\n                handler: async (data) => {\r\n                  try {\r\n                    const credential = EmailAuthProvider.credential(user.email!, data.password);\r\n                    await reauthenticateWithCredential(user, credential);\r\n                    resolve(true);\r\n                  } catch (err) {\r\n                    console.error('Password re-authentication failed', err);\r\n                    this.overlay.showAlert(await this.translate.get('ERROR').toPromise(), err.message || await this.translate.get('GENERIC_ERROR').toPromise());\r\n                    resolve(false);\r\n                  }\r\n                }\r\n              }\r\n            ]\r\n          });\r\n          await alert.present();\r\n        });\r\n      }\r\n\r\n      return false;\r\n    } catch (e) {\r\n      console.error('reauthenticateUser error', e);\r\n      return false;\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  \r\n\r\n  async updateProfile() {\r\n    try {\r\n      if (!this.form.valid) {\r\n        this.form.markAllAsTouched();\r\n        return;\r\n      }\r\n      this.approve2 = true;\r\n\r\n      const user = this.authy.currentUser;\r\n      if (user) {\r\n        console.log('User authenticated', user);\r\n\r\n        // First update display name and photo\r\n        console.log('Updating profile...');\r\n        await updateProfile(user, {\r\n          displayName: `${this.form.value.fullname} ${this.form.value.lastname}`,\r\n          photoURL: this.imageUrl,\r\n        });\r\n\r\n        // Check if email is provided before attempting to update it\r\n        if (this.form.value.email && user.email !== this.form.value.email) {\r\n          // Show confirmation dialog for email change\r\n          const alert = await this.alertController.create({\r\n            header: await this.translate.get('EMAIL_CHANGE').toPromise(),\r\n            message: await this.translate.get('EMAIL_CHANGE_VERIFY').toPromise(),\r\n            buttons: [\r\n              {\r\n                text: await this.translate.get('CANCEL').toPromise(),\r\n                role: 'cancel'\r\n              },\r\n              {\r\n                text: await this.translate.get('CONTINUE').toPromise(),\r\n                handler: async () => {\r\n                  try {\r\n                    await updateEmail(user, this.form.value.email);\r\n                    // Send verification email\r\n                    await sendEmailVerification(user);\r\n\r\n                    // Show success message\r\n                    await this.alertController.create({\r\n                      header: await this.translate.get('EMAIL_VERIFICATION_SENT').toPromise(),\r\n                      message: await this.translate.get('CHECK_EMAIL').toPromise(),\r\n                      buttons: ['OK']\r\n                    }).then(alert => alert.present());\r\n                  } catch (error) {\r\n                    if (error && error.code === 'auth/requires-recent-login') {\r\n                      const reauthOk = await this.reauthenticateUser();\r\n                      if (reauthOk) {\r\n                        try {\r\n                          const freshUser = this.authy.currentUser;\r\n                          if (freshUser) {\r\n                            await updateEmail(freshUser, this.form.value.email);\r\n                            await sendEmailVerification(freshUser);\r\n                            await this.alertController.create({\r\n                              header: await this.translate.get('EMAIL_VERIFICATION_SENT').toPromise(),\r\n                              message: await this.translate.get('CHECK_EMAIL').toPromise(),\r\n                              buttons: ['OK']\r\n                            }).then(a => a.present());\r\n                          }\r\n                        } catch (err2) {\r\n                          console.error('Failed to update email after reauthentication', err2);\r\n                          this.overlay.showAlert(await this.translate.get('ERROR').toPromise(), err2.message || await this.translate.get('GENERIC_ERROR').toPromise());\r\n                          return;\r\n                        }\r\n                      } else {\r\n                        // Re-authentication failed or was cancelled by the user.\r\n                        this.overlay.showAlert(await this.translate.get('ERROR').toPromise(), await this.translate.get('PLEASE_WAIT').toPromise());\r\n                        return;\r\n                      }\r\n                    } else {\r\n                      this.overlay.showAlert(await this.translate.get('ERROR').toPromise(), error?.message || await this.translate.get('GENERIC_ERROR').toPromise());\r\n                      return;\r\n                    }\r\n                  }\r\n\r\n                  // Only create/update avatar and navigate after email handling completes\r\n                  try {\r\n                    await this.avatar.createUser(\r\n                      `${this.form.value.fullname} ${this.form.value.lastname}`,\r\n                      this.form.value.email,\r\n                      this.imageUrl,\r\n                      user.phoneNumber,\r\n                      user.uid\r\n                    );\r\n                    this.approve2 = false;\r\n                    this.router.navigateByUrl('home');\r\n                    console.log('Profile updated');\r\n                  } catch (createErr) {\r\n                    console.error('Error creating/updating avatar after email change', createErr);\r\n                    this.overlay.showAlert(await this.translate.get('ERROR').toPromise(), createErr?.message || await this.translate.get('GENERIC_ERROR').toPromise());\r\n                    this.approve2 = false;\r\n                  }\r\n                }\r\n              }\r\n            ]\r\n          });\r\n          await alert.present();\r\n          // Stop further execution here; avatar.createUser will be handled in the alert handler.\r\n          return;\r\n        }\r\n\r\n        // No email change required â€” proceed to create/update avatar and navigate\r\n        await this.avatar.createUser(\r\n          `${this.form.value.fullname} ${this.form.value.lastname}`,\r\n          this.form.value.email,\r\n          this.imageUrl,\r\n          user.phoneNumber,\r\n          user.uid\r\n        );\r\n\r\n        this.approve2 = false;\r\n        this.router.navigateByUrl('home');\r\n        console.log('Profile updated');\r\n      }\r\n    } catch (e: any) {\r\n      console.error('An error occurred during profile update', e);\r\n      this.approve2 = false;\r\n      if (e.code === 'auth/email-already-in-use') {\r\n        this.overlay.showAlert(\r\n          await this.translate.get('ERROR').toPromise(),\r\n          await this.translate.get('EMAIL_IN_USE').toPromise()\r\n        );\r\n      } else if (e.code === 'auth/requires-recent-login') {\r\n        this.reauthenticateWithPhoneNumber();\r\n      } else {\r\n        this.overlay.showAlert(\r\n          await this.translate.get('ERROR').toPromise(),\r\n          e.message || await this.translate.get('GENERIC_ERROR').toPromise()\r\n        );\r\n      }\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n  \r\n\r\n  async signInWithGoogle() {\r\n    try {\r\n      const provider = new GoogleAuthProvider();\r\n      const result = await signInWithPopup(this.authy, provider);\r\n      const user = result.user;\r\n  \r\n      if (user) {\r\n        this.imageUrl = user.photoURL || ''; // Update imageUrl with photoURL from Google\r\n  \r\n        this.form.patchValue({\r\n          fullname: user.displayName?.split(' ')[0] || '',\r\n          lastname: user.displayName?.split(' ')[1] || '',\r\n          email: user.email || ''\r\n        });\r\n  \r\n        console.log(\"User signed in with Google\", user);\r\n        console.log(\"Email:\", user.email);\r\n        console.log(\"Display Name:\", user.displayName);\r\n        console.log(\"Photo URL:\", user.photoURL);\r\n  \r\n        // Call updateProfile to update user details in Firebase\r\n        await this.updateProfile();\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error during Google sign-in\", error);\r\n      this.overlay.showAlert('Sign-in failed', 'There was a problem signing in with Google.');\r\n    }\r\n  }\r\n  \r\n  changeLanguage(lang: string) {\r\n    this.translate.use(lang);\r\n    localStorage.setItem('language', lang);\r\n  }\r\n\r\n}\r\n","<ion-header [translucent]=\"true\" class=\"ion-no-border ion-padding\">\r\n  <ion-list>\r\n    <ion-list-header class=\"ion-padding-top\">\r\n      <ion-label color=\"primary\" class=\"ion-text-center\">\r\n        <h1>{{ 'PERSONAL_INFO' | translate }}</h1>\r\n      </ion-label>\r\n    </ion-list-header>\r\n  \r\n    <ion-item-group class=\"ion-margin-horizontal\">\r\n      <!-- <div class=\"preview\">\r\n        <ion-avatar (click)=\"presentImageSourceActionSheet()\">\r\n          <img *ngIf=\"imageUrl; else placeholder_avatar;\" [src]=\"imageUrl\" />\r\n          <ng-template #placeholder_avatar>\r\n            <div class=\"fallback\">\r\n              <p *ngIf=\"!approve2\">Select avatar</p>\r\n              <ion-progress-bar *ngIf=\"approve2\" color='light' type=\"indeterminate\"></ion-progress-bar>\r\n            </div>\r\n          </ng-template>\r\n        </ion-avatar>\r\n      </div> -->\r\n\r\n\r\n      <form [formGroup]=\"form\">\r\n\r\n        <div class=\"ion-margin-vertical\">\r\n          <ion-item class=\"ion-margin\" [class.ion-invalid]=\"form.get('fullname')?.invalid && form.get('fullname')?.touched\">\r\n            <ion-input \r\n              formControlName=\"fullname\" \r\n              [placeholder]=\"'FIRST_NAME' | translate\" \r\n              type=\"text\"\r\n              minlength=\"1\"\r\n              maxlength=\"200\">\r\n            </ion-input>\r\n          </ion-item>\r\n          <ion-note color=\"danger\" class=\"ion-margin-horizontal ion-padding-start\" *ngIf=\"form.get('fullname')?.invalid && form.get('fullname')?.touched\">\r\n            <span *ngIf=\"form.get('fullname')?.errors?.['required']\">{{ 'FIRST_NAME_REQUIRED' | translate }}</span>\r\n            <span *ngIf=\"form.get('fullname')?.errors?.['minlength']\">{{ 'FIRST_NAME_MIN_LENGTH' | translate }}</span>\r\n            <span *ngIf=\"form.get('fullname')?.errors?.['maxlength']\">{{ 'FIRST_NAME_MAX_LENGTH' | translate }}</span>\r\n          </ion-note>\r\n\r\n          <ion-item class=\"ion-margin\" [class.ion-invalid]=\"form.get('lastname')?.invalid && form.get('lastname')?.touched\">\r\n            <ion-input \r\n              formControlName=\"lastname\" \r\n              [placeholder]=\"'LAST_NAME' | translate\" \r\n              type=\"text\"\r\n              minlength=\"1\"\r\n              maxlength=\"200\">\r\n            </ion-input>\r\n          </ion-item>\r\n          <ion-note color=\"danger\" class=\"ion-margin-horizontal ion-padding-start\" *ngIf=\"form.get('lastname')?.invalid && form.get('lastname')?.touched\">\r\n            <span *ngIf=\"form.get('lastname')?.errors?.['required']\">{{ 'LAST_NAME_REQUIRED' | translate }}</span>\r\n            <span *ngIf=\"form.get('lastname')?.errors?.['minlength']\">{{ 'LAST_NAME_MIN_LENGTH' | translate }}</span>\r\n            <span *ngIf=\"form.get('lastname')?.errors?.['maxlength']\">{{ 'LAST_NAME_MAX_LENGTH' | translate }}</span>\r\n          </ion-note>\r\n\r\n          <ion-item class=\"ion-margin\" [class.ion-invalid]=\"form.get('email')?.invalid && form.get('email')?.touched\">\r\n            <ion-input \r\n              formControlName=\"email\" \r\n              [placeholder]=\"'EMAIL_PLACEHOLDER' | translate\" \r\n              type=\"email\"\r\n              minlength=\"1\"\r\n              maxlength=\"200\">\r\n            </ion-input>\r\n          </ion-item>\r\n          <ion-note color=\"danger\" class=\"ion-margin-horizontal ion-padding-start\" *ngIf=\"form.get('email')?.invalid && form.get('email')?.touched\">\r\n            <span *ngIf=\"form.get('email')?.errors?.['email']\">{{ 'EMAIL_INVALID' | translate }}</span>\r\n            <span *ngIf=\"form.get('email')?.errors?.['maxlength']\">{{ 'EMAIL_MAX_LENGTH' | translate }}</span>\r\n          </ion-note>\r\n        </div>\r\n\r\n      </form>\r\n\r\n      <!-- Placeholder for reCAPTCHA -->\r\n      <div id=\"recaptcha-container\"></div>\r\n\r\n      <ion-button shape=\"round\" size=\"large\" type=\"submit\" [disabled]=\"!form.valid\" color=\"primary\" (click)=\"updateProfile()\" expand=\"block\">\r\n        <ion-label *ngIf=\"!approve2\">{{ 'CONTINUE' | translate }}</ion-label>\r\n        <ion-icon *ngIf=\"!approve2\" color='light' slot=\"end\" name=\"arrow-forward\"></ion-icon>\r\n        <ion-progress-bar *ngIf=\"approve2\" color='light' type=\"indeterminate\"></ion-progress-bar>\r\n      </ion-button>\r\n\r\n      <!-- <ion-button shape=\"round\" size=\"large\" color=\"secondary\" (click)=\"signInWithGoogle()\" expand=\"block\">\r\n        <ion-icon slot=\"start\" name=\"logo-google\"></ion-icon>\r\n        <ion-label>Sign in with Google</ion-label>\r\n      </ion-button> -->\r\n\r\n    </ion-item-group>\r\n  </ion-list>\r\n</ion-header>\r\n\r\n<ion-content class=\"ion-no-border\">\r\n  <ion-list class=\"ion-no-padding\" lines=\"none\">\r\n  </ion-list>\r\n\r\n  <!-- Language Selector FAB -->\r\n  <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\" class=\"language-fab\">\r\n    <ion-fab-button size=\"medium\" color=\"light\">\r\n      <ion-icon name=\"language-outline\"></ion-icon>\r\n    </ion-fab-button>\r\n    <ion-fab-list side=\"top\">\r\n      <ion-fab-button (click)=\"changeLanguage('en')\" color=\"light\" size=\"small\">\r\n            <ion-text>EN</ion-text>\r\n      </ion-fab-button>\r\n      <ion-fab-button (click)=\"changeLanguage('ms')\" color=\"light\" size=\"small\">\r\n            <ion-text>MS</ion-text>\r\n      </ion-fab-button>\r\n    </ion-fab-list>\r\n  </ion-fab>\r\n</ion-content>\r\n","import { Injectable } from '@angular/core';\r\nimport { Storage, ref, uploadString, getDownloadURL } from '@angular/fire/storage';\r\nimport { Photo } from '@capacitor/camera';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ImageUploadService {\r\n  constructor(\r\n    private storage: Storage\r\n  ) { }\r\n\r\n  async uploadImage(image: Photo): Promise<string> {\r\n    const path = `images/${new Date().getTime()}.jpg`;\r\n    const storageRef = ref(this.storage, path);\r\n    const uploadResult = await uploadString(storageRef, image.base64String, 'base64');\r\n\r\n    return getDownloadURL(uploadResult.ref);\r\n  }\r\n}\r\n"],"names":["updateEmail","updateProfile","signInWithPopup","reauthenticateWithCredential","signInWithPhoneNumber","sendEmailVerification","GoogleAuthProvider","RecaptchaVerifier","PhoneAuthProvider","EmailAuthProvider","FormControl","FormGroup","Validators","Camera","CameraResultType","CameraSource","i0","DetailsPage","constructor","overlay","authy","authService","avatar","router","actionSheetController","alertController","imageUploadService","loadingController","platform","translate","onAuthStateChanged","user","profile","form","patchValue","fullname","displayName","split","lastname","email","ngOnInit","validators","required","minLength","maxLength","changeImage","source","image","getPhoto","quality","allowEditing","resultType","Base64","loading","create","present","uid","dismiss","alert","header","message","buttons","result","uploadImage","imageUrl","uploadError","includes","error","get","toPromise","initializeBackButtonCustomHandler","backButtonSubscription","backButton","subscribeWithPriority","handleBackButton","showExitConfirmation","console","text","role","handler","navigator","exitApp","presentImageSourceActionSheet","actionSheet","icon","Photos","selectFile","input","document","createElement","type","accept","onchange","event","file","target","files","reader","FileReader","onload","e","base64String","readAsDataURL","click","reauthenticateWithPhoneNumber","Promise","resolve","reject","currentUser","Error","log","recaptchaContainerId","recaptchaContainer","getElementById","id","body","appendChild","innerHTML","recaptchaVerifier","phoneNumber","verificationResult","errorMessage","code","showAlert","verificationId","storedOTP","localStorage","getItem","userVerificationCode","inputs","name","placeholder","value","data","verificationCode","phoneCredential","credential","removeItem","reauthenticateUser","password","err","valid","markAllAsTouched","approve2","photoURL","then","reauthOk","freshUser","a","err2","createUser","navigateByUrl","createErr","signInWithGoogle","provider","changeLanguage","lang","use","setItem","selectors","decls","vars","consts","template","ctx","ref","uploadString","getDownloadURL","ImageUploadService","storage","path","Date","getTime","storageRef","uploadResult","factory","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}