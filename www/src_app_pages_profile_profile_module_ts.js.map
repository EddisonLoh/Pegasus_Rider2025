{"version":3,"file":"src_app_pages_profile_profile_module_ts.js","mappings":"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","sources":["./src/app/pages/profile/profile-routing.module.ts","./src/app/pages/profile/profile.module.ts","./src/app/pages/profile/profile.page.ts","./src/app/pages/profile/profile.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ProfilePage } from './profile.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProfilePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ProfilePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ProfilePageRoutingModule } from './profile-routing.module';\r\nimport { ProfilePage } from './profile.page';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,\r\n    ProfilePageRoutingModule,\r\n    TranslateModule.forChild()\r\n  ],\r\n  declarations: [ProfilePage]\r\n})\r\nexport class ProfilePageModule {}\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Auth, updateProfile } from '@angular/fire/auth';\r\nimport { Router } from '@angular/router';\r\nimport { Camera, CameraResultType, CameraSource, Photo } from '@capacitor/camera';\r\nimport { LoadingController, AlertController, ActionSheetController } from '@ionic/angular';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { AvatarService } from 'src/app/services/avatar.service';\r\nimport { doc } from '@angular/fire/firestore';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Component({\r\n  selector: 'app-profile',\r\n  templateUrl: './profile.page.html',\r\n  styleUrls: ['./profile.page.scss'],\r\n})\r\nexport class ProfilePage implements OnInit, OnDestroy {\r\n\r\n  profileForm: FormGroup;\r\n  user: import(\"@angular/fire/auth\").User;\r\n  CountryJson = environment.CountryJson;\r\n\r\n  constructor(\r\n    public avatarService: AvatarService,\r\n    private authService: AuthService,\r\n    private router: Router,\r\n    private loadingController: LoadingController,\r\n    private alertController: AlertController,\r\n    private auth: Auth,\r\n    private actionSheetController: ActionSheetController,\r\n    private fb: FormBuilder,\r\n    private translate: TranslateService\r\n  ) {\r\n    this.auth.onAuthStateChanged(async (user) => {\r\n      if (user) {\r\n        this.user = user;\r\n        this.profileForm.patchValue({\r\n          displayName: user.displayName || '',\r\n        });\r\n        this.avatarService.profile = user; // Ensure the profile is set\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    console.log('ProfilePage initialized');\r\n    this.profileForm = this.fb.group({\r\n      displayName: ['']\r\n    });\r\n\r\n    this.profileForm.get('displayName').valueChanges.subscribe(value => {\r\n      this.saveProfile();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    console.log('ProfilePage destroyed');\r\n    // Clean up any subscriptions or listeners if necessary\r\n  }\r\n\r\n  async logout() {\r\n    await this.authService.logout();\r\n    this.router.navigateByUrl('/', { replaceUrl: true });\r\n  }\r\n\r\n  goBack() {\r\n    // Use the router to navigate back\r\n    this.router.navigate(['/home']); // Replace '/previous-page' with your desired route\r\n  }\r\n\r\n  async presentImageSourceActionSheet() {\r\n    const actionSheet = await this.actionSheetController.create({\r\n      header: await this.translate.get('SELECT_IMAGE_SOURCE').toPromise(),\r\n      buttons: [\r\n        {\r\n          text: await this.translate.get('CAMERA').toPromise(),\r\n          icon: 'camera',\r\n          handler: () => {\r\n            this.changeImage(CameraSource.Camera);\r\n          }\r\n        },\r\n        {\r\n          text: await this.translate.get('GALLERY').toPromise(),\r\n          icon: 'images',\r\n          handler: () => {\r\n            this.changeImage(CameraSource.Photos);\r\n          }\r\n        },\r\n        {\r\n          text: await this.translate.get('FILE').toPromise(),\r\n          icon: 'document',\r\n          handler: () => {\r\n            this.selectFile();\r\n          }\r\n        },\r\n        {\r\n          text: await this.translate.get('CANCEL').toPromise(),\r\n          icon: 'close',\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n    await actionSheet.present();\r\n  }\r\n\r\n  async changeImage(source: CameraSource) {\r\n    try {\r\n      const image = await Camera.getPhoto({\r\n        quality: 90,\r\n        allowEditing: false,\r\n        resultType: CameraResultType.Base64,\r\n        source: source,\r\n      });\r\n\r\n      if (image) {\r\n        const loading = await this.loadingController.create();\r\n        await loading.present();\r\n\r\n        if (!this.avatarService.profile?.uid) {\r\n          loading.dismiss();\r\n          const alert = await this.alertController.create({\r\n            header: await this.translate.get('UPLOAD_FAILED').toPromise(),\r\n            message: await this.translate.get('PROFILE_MISSING').toPromise(),\r\n            buttons: ['OK'],\r\n          });\r\n          await alert.present();\r\n          return;\r\n        }\r\n\r\n        const result = await this.avatarService.uploadImage(image, this.avatarService.profile.uid);\r\n        loading.dismiss();\r\n\r\n        if (!result) {\r\n          const alert = await this.alertController.create({\r\n            header: await this.translate.get('UPLOAD_FAILED').toPromise(),\r\n            message: await this.translate.get('UPLOAD_ERROR').toPromise(),\r\n            buttons: ['OK'],\r\n          });\r\n          await alert.present();\r\n        } else {\r\n          const alert = await this.alertController.create({\r\n            header: await this.translate.get('UPLOAD_SUCCESS').toPromise(),\r\n            message: await this.translate.get('AVATAR_UPDATED').toPromise(),\r\n            buttons: ['OK'],\r\n          });\r\n          await alert.present();\r\n\r\n          // Update the user profile\r\n          if (this.auth.currentUser) {\r\n            const result = await this.avatarService.uploadImage(image as Photo, this.avatarService.profile.uid);\r\n            await updateProfile(this.user, {\r\n              photoURL: result,\r\n            });\r\n            this.user = this.auth.currentUser; // Refresh the user object\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      const alert = await this.alertController.create({\r\n        header: await this.translate.get('UPLOAD_FAILED').toPromise(),\r\n        message: `${await this.translate.get('UPLOAD_ERROR').toPromise()}: ${error.message}`,\r\n        buttons: ['OK'],\r\n      });\r\n      await alert.present();\r\n    }\r\n  }\r\n\r\n  async selectFile() {\r\n    const input = document.createElement('input');\r\n    input.type = 'file';\r\n    input.accept = 'image/*';\r\n    input.onchange = async (event: any) => {\r\n      const file = event.target.files[0];\r\n      if (file) {\r\n        const reader = new FileReader();\r\n        reader.onload = async (e: any) => {\r\n          const image = {\r\n            base64String: e.target.result.split(',')[1]\r\n          };\r\n          const loading = await this.loadingController.create();\r\n          await loading.present();\r\n\r\n          if (!this.avatarService.profile?.uid) {\r\n            loading.dismiss();\r\n            const alert = await this.alertController.create({\r\n              header: await this.translate.get('UPLOAD_FAILED').toPromise(),\r\n              message: await this.translate.get('PROFILE_MISSING').toPromise(),\r\n              buttons: ['OK'],\r\n            });\r\n            await alert.present();\r\n            return;\r\n          }\r\n\r\n          const result = await this.avatarService.uploadImage(image as Photo, this.avatarService.profile.uid);\r\n          loading.dismiss();\r\n\r\n          if (!result) {\r\n            const alert = await this.alertController.create({\r\n              header: await this.translate.get('UPLOAD_FAILED').toPromise(),\r\n              message: await this.translate.get('UPLOAD_ERROR').toPromise(),\r\n              buttons: ['OK'],\r\n            });\r\n            await alert.present();\r\n          } else {\r\n            const alert = await this.alertController.create({\r\n              header: await this.translate.get('UPLOAD_SUCCESS').toPromise(),\r\n              message: await this.translate.get('AVATAR_UPDATED').toPromise(),\r\n              buttons: ['OK'],\r\n            });\r\n            await alert.present();\r\n\r\n            // Update the user profile\r\n            if (this.auth.currentUser) {\r\n              await updateProfile(this.user, {\r\n                photoURL: result,\r\n              });\r\n              this.user = this.auth.currentUser; // Refresh the user object\r\n            }\r\n          }\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    };\r\n    input.click();\r\n  }\r\n\r\n  async saveProfile() {\r\n    if (this.user) {\r\n      try {\r\n        await updateProfile(this.user, {\r\n          displayName: this.profileForm.get('displayName').value,\r\n        });\r\n        // Optional success message\r\n        // const alert = await this.alertController.create({\r\n        //   header: await this.translate.get('PROFILE_UPDATED').toPromise(),\r\n        //   message: await this.translate.get('PROFILE_UPDATE_SUCCESS').toPromise(),\r\n        //   buttons: ['OK'],\r\n        // });\r\n        // await alert.present();\r\n      } catch (error) {\r\n        // Optional error message\r\n        // const alert = await this.alertController.create({\r\n        //   header: await this.translate.get('UPDATE_FAILED').toPromise(),\r\n        //   message: await this.translate.get('PROFILE_UPDATE_ERROR').toPromise(),\r\n        //   buttons: ['OK'],\r\n        // });\r\n        // await alert.present();\r\n      }\r\n    }\r\n  }\r\n\r\n  getFlag(lang: string) {\r\n    let isoCode = 'US';\r\n    if (lang === 'ms') isoCode = 'MY';\r\n    if (lang === 'ar') isoCode = 'SA';\r\n    \r\n    const country = this.CountryJson.find(c => c.isoCode === isoCode);\r\n    return country ? country.flag : '';\r\n  }\r\n\r\n  changeLanguage(lang: string) {\r\n    this.translate.use(lang);\r\n  }\r\n}\r\n","<ion-header class=\"ion-no-border\">\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-button color=\"primary\" (click)=\"goBack()\">\r\n        <ion-back-button></ion-back-button>\r\n      </ion-button>\r\n    </ion-buttons>\r\n    <ion-buttons slot=\"end\">\r\n      <ion-button (click)=\"logout()\">\r\n        <ion-icon slot=\"icon-only\" name=\"log-out\"></ion-icon>\r\n      </ion-button>\r\n    </ion-buttons>\r\n    <ion-title>{{ 'MY_PROFILE' | translate }}</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content class=\"ion-padding\">\r\n  <div *ngIf=\"user; else loading\">\r\n    <div class=\"preview\">\r\n      <ion-avatar (click)=\"presentImageSourceActionSheet()\">\r\n        <img *ngIf=\"user.photoURL; else placeholder_avatar;\" [src]=\"user.photoURL\" />\r\n        <ng-template #placeholder_avatar>\r\n          <div class=\"fallback\">\r\n            <p>{{ 'SELECT_AVATAR' | translate }}</p>\r\n          </div>\r\n        </ng-template>\r\n      </ion-avatar>\r\n    </div>\r\n\r\n    <form [formGroup]=\"profileForm\">\r\n      <ion-item class=\"ion-margin\">\r\n        <ion-icon name=\"call\" color=\"primary\" slot=\"start\"></ion-icon>\r\n        <ion-label>\r\n          {{ user.phoneNumber || 'No phone number' }}\r\n        </ion-label>\r\n      </ion-item>\r\n\r\n      <ion-item class=\"ion-margin\">\r\n        <ion-icon name=\"person\" color=\"primary\" slot=\"start\"></ion-icon>\r\n        <ion-input formControlName=\"displayName\" placeholder=\"Name\"></ion-input>\r\n      </ion-item>\r\n\r\n      <ion-item class=\"ion-margin\">\r\n        <ion-icon name=\"mail\" color=\"primary\" slot=\"start\"></ion-icon>\r\n        <ion-label>\r\n          {{ user.email || 'No email' }}\r\n        </ion-label>\r\n      </ion-item>\r\n    </form>\r\n\r\n    <ion-label color=\"primary\" class=\"ion-text-center ion-padding-top\">\r\n      <p>{{ 'RECEIPT_EMAIL_NOTE' | translate }}</p>\r\n    </ion-label>\r\n  </div>\r\n\r\n  <ng-template #loading>\r\n    <ion-spinner></ion-spinner>\r\n    <p>{{ 'LOADING_PROFILE' | translate }}</p>\r\n  </ng-template>\r\n\r\n  <!-- Language Selector FAB -->\r\n  <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\" class=\"language-fab\">\r\n    <ion-fab-button size=\"medium\" color=\"light\">\r\n      <ion-icon name=\"language-outline\"></ion-icon>\r\n    </ion-fab-button>\r\n    <ion-fab-list side=\"top\">\r\n      <ion-fab-button (click)=\"changeLanguage('en')\" color=\"light\" size=\"small\">\r\n            <ion-text>EN</ion-text>\r\n      </ion-fab-button>\r\n      <ion-fab-button (click)=\"changeLanguage('ms')\" color=\"light\" size=\"small\">\r\n            <ion-text>MS</ion-text>\r\n      </ion-fab-button>\r\n    </ion-fab-list>\r\n  </ion-fab>\r\n</ion-content>\r\n"],"names":["updateProfile","Camera","CameraResultType","CameraSource","environment","i0","_r4","ProfilePage","constructor","avatarService","authService","router","loadingController","alertController","auth","actionSheetController","fb","translate","CountryJson","onAuthStateChanged","user","profileForm","patchValue","displayName","profile","ngOnInit","console","log","group","get","valueChanges","subscribe","value","saveProfile","ngOnDestroy","logout","navigateByUrl","replaceUrl","goBack","navigate","presentImageSourceActionSheet","actionSheet","create","header","toPromise","buttons","text","icon","handler","changeImage","Photos","selectFile","role","present","source","image","getPhoto","quality","allowEditing","resultType","Base64","loading","uid","dismiss","alert","message","result","uploadImage","currentUser","photoURL","error","input","document","createElement","type","accept","onchange","event","file","target","files","reader","FileReader","onload","e","base64String","split","readAsDataURL","click","getFlag","lang","isoCode","country","find","c","flag","changeLanguage","use","selectors","decls","vars","consts","template","ctx","_r1"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}